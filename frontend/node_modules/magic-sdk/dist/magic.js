"use strict";var Magic=(()=>{var Oi=Object.create;var Xe=Object.defineProperty;var Ni=Object.getOwnPropertyDescriptor;var Ti=Object.getOwnPropertyNames,gr=Object.getOwnPropertySymbols,Mi=Object.getPrototypeOf,_r=Object.prototype.hasOwnProperty,Li=Object.prototype.propertyIsEnumerable;var Er=(e,t,r)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ir=(e,t)=>{for(var r in t||(t={}))_r.call(t,r)&&Er(e,r,t[r]);if(gr)for(var r of gr(t))Li.call(t,r)&&Er(e,r,t[r]);return e};var ze=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Rr=(e,t)=>{for(var r in t)Xe(e,r,{get:t[r],enumerable:!0})},br=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ti(t))!_r.call(e,a)&&a!==r&&Xe(e,a,{get:()=>t[a],enumerable:!(i=Ni(t,a))||i.enumerable});return e};var Sr=(e,t,r)=>(r=e!=null?Oi(Mi(e)):{},br(t||!e||!e.__esModule?Xe(r,"default",{value:e,enumerable:!0}):r,e)),Ci=e=>br(Xe({},"__esModule",{value:!0}),e);var ge=(e,t,r)=>new Promise((i,a)=>{var s=p=>{try{f(r.next(p))}catch(y){a(y)}},m=p=>{try{f(r.throw(p))}catch(y){a(y)}},f=p=>p.done?i(p.value):Promise.resolve(p.value).then(s,m);f((r=r.apply(e,t)).next())});var Nn=wr((On,Jt)=>{(function(e){if(typeof On=="object"&&typeof Jt<"u")Jt.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function i(a,s,m){function f(g,N){if(!s[g]){if(!a[g]){var _=typeof ze=="function"&&ze;if(!N&&_)return _(g,!0);if(p)return p(g,!0);var O=new Error("Cannot find module '"+g+"'");throw O.code="MODULE_NOT_FOUND",O}var L=s[g]={exports:{}};a[g][0].call(L.exports,function(F){var C=a[g][1][F];return f(C||F)},L,L.exports,i,a,s,m)}return s[g].exports}for(var p=typeof ze=="function"&&ze,y=0;y<m.length;y++)f(m[y]);return f}({1:[function(i,a,s){(function(m){"use strict";var f=m.MutationObserver||m.WebKitMutationObserver,p;if(f){var y=0,g=new f(F),N=m.document.createTextNode("");g.observe(N,{characterData:!0}),p=function(){N.data=y=++y%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var _=new m.MessageChannel;_.port1.onmessage=F,p=function(){_.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?p=function(){var G=m.document.createElement("script");G.onreadystatechange=function(){F(),G.onreadystatechange=null,G.parentNode.removeChild(G),G=null},m.document.documentElement.appendChild(G)}:p=function(){setTimeout(F,0)};var O,L=[];function F(){O=!0;for(var G,J,$=L.length;$;){for(J=L,L=[],G=-1;++G<$;)J[G]();$=L.length}O=!1}a.exports=C;function C(G){L.push(G)===1&&!O&&p()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(i,a,s){"use strict";var m=i(1);function f(){}var p={},y=["REJECTED"],g=["FULFILLED"],N=["PENDING"];a.exports=_;function _(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,A!==f&&C(this,A)}_.prototype.catch=function(A){return this.then(null,A)},_.prototype.then=function(A,B){if(typeof A!="function"&&this.state===g||typeof B!="function"&&this.state===y)return this;var x=new this.constructor(f);if(this.state!==N){var q=this.state===g?A:B;L(x,q,this.outcome)}else this.queue.push(new O(x,A,B));return x};function O(A,B,x){this.promise=A,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}O.prototype.callFulfilled=function(A){p.resolve(this.promise,A)},O.prototype.otherCallFulfilled=function(A){L(this.promise,this.onFulfilled,A)},O.prototype.callRejected=function(A){p.reject(this.promise,A)},O.prototype.otherCallRejected=function(A){L(this.promise,this.onRejected,A)};function L(A,B,x){m(function(){var q;try{q=B(x)}catch(Q){return p.reject(A,Q)}q===A?p.reject(A,new TypeError("Cannot resolve promise with itself")):p.resolve(A,q)})}p.resolve=function(A,B){var x=G(F,B);if(x.status==="error")return p.reject(A,x.value);var q=x.value;if(q)C(A,q);else{A.state=g,A.outcome=B;for(var Q=-1,ae=A.queue.length;++Q<ae;)A.queue[Q].callFulfilled(B)}return A},p.reject=function(A,B){A.state=y,A.outcome=B;for(var x=-1,q=A.queue.length;++x<q;)A.queue[x].callRejected(B);return A};function F(A){var B=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof B=="function")return function(){B.apply(A,arguments)}}function C(A,B){var x=!1;function q(le){x||(x=!0,p.reject(A,le))}function Q(le){x||(x=!0,p.resolve(A,le))}function ae(){B(Q,q)}var ce=G(ae);ce.status==="error"&&q(ce.value)}function G(A,B){var x={};try{x.value=A(B),x.status="success"}catch(q){x.status="error",x.value=q}return x}_.resolve=J;function J(A){return A instanceof this?A:p.resolve(new this(f),A)}_.reject=$;function $(A){var B=new this(f);return p.reject(B,A)}_.all=Ae;function Ae(A){var B=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=A.length,q=!1;if(!x)return this.resolve([]);for(var Q=new Array(x),ae=0,ce=-1,le=new this(f);++ce<x;)ve(A[ce],ce);return le;function ve(Ce,h){B.resolve(Ce).then(I,function(S){q||(q=!0,p.reject(le,S))});function I(S){Q[h]=S,++ae===x&&!q&&(q=!0,p.resolve(le,Q))}}}_.race=oe;function oe(A){var B=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=A.length,q=!1;if(!x)return this.resolve([]);for(var Q=-1,ae=new this(f);++Q<x;)ce(A[Q]);return ae;function ce(le){B.resolve(le).then(function(ve){q||(q=!0,p.resolve(ae,ve))},function(ve){q||(q=!0,p.reject(ae,ve))})}}},{1:1}],3:[function(i,a,s){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=i(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(i,a,s){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function f(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")}function p(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var y=p();function g(){try{if(!y||!y.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),c=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||c)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function N(n,c){n=n||[],c=c||{};try{return new Blob(n,c)}catch(l){if(l.name!=="TypeError")throw l;for(var o=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,u=new o,d=0;d<n.length;d+=1)u.append(n[d]);return u.getBlob(c.type)}}typeof Promise>"u"&&i(3);var _=Promise;function O(n,c){c&&n.then(function(o){c(null,o)},function(o){c(o)})}function L(n,c,o){typeof c=="function"&&n.then(c),typeof o=="function"&&n.catch(o)}function F(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function C(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var G="local-forage-detect-blob-support",J=void 0,$={},Ae=Object.prototype.toString,oe="readonly",A="readwrite";function B(n){for(var c=n.length,o=new ArrayBuffer(c),u=new Uint8Array(o),d=0;d<c;d++)u[d]=n.charCodeAt(d);return o}function x(n){return new _(function(c){var o=n.transaction(G,A),u=N([""]);o.objectStore(G).put(u,"key"),o.onabort=function(d){d.preventDefault(),d.stopPropagation(),c(!1)},o.oncomplete=function(){var d=navigator.userAgent.match(/Chrome\/(\d+)/),l=navigator.userAgent.match(/Edge\//);c(l||!d||parseInt(d[1],10)>=43)}}).catch(function(){return!1})}function q(n){return typeof J=="boolean"?_.resolve(J):x(n).then(function(c){return J=c,J})}function Q(n){var c=$[n.name],o={};o.promise=new _(function(u,d){o.resolve=u,o.reject=d}),c.deferredOperations.push(o),c.dbReady?c.dbReady=c.dbReady.then(function(){return o.promise}):c.dbReady=o.promise}function ae(n){var c=$[n.name],o=c.deferredOperations.pop();if(o)return o.resolve(),o.promise}function ce(n,c){var o=$[n.name],u=o.deferredOperations.pop();if(u)return u.reject(c),u.promise}function le(n,c){return new _(function(o,u){if($[n.name]=$[n.name]||ee(),n.db)if(c)Q(n),n.db.close();else return o(n.db);var d=[n.name];c&&d.push(n.version);var l=y.open.apply(y,d);c&&(l.onupgradeneeded=function(v){var E=l.result;try{E.createObjectStore(n.storeName),v.oldVersion<=1&&E.createObjectStore(G)}catch(w){if(w.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+v.oldVersion+" to version "+v.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw w}}),l.onerror=function(v){v.preventDefault(),u(l.error)},l.onsuccess=function(){var v=l.result;v.onversionchange=function(E){E.target.close()},o(v),ae(n)}})}function ve(n){return le(n,!1)}function Ce(n){return le(n,!0)}function h(n,c){if(!n.db)return!0;var o=!n.db.objectStoreNames.contains(n.storeName),u=n.version<n.db.version,d=n.version>n.db.version;if(u&&(n.version!==c&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),d||o){if(o){var l=n.db.version+1;l>n.version&&(n.version=l)}return!0}return!1}function I(n){return new _(function(c,o){var u=new FileReader;u.onerror=o,u.onloadend=function(d){var l=btoa(d.target.result||"");c({__local_forage_encoded_blob:!0,data:l,type:n.type})},u.readAsBinaryString(n)})}function S(n){var c=B(atob(n.data));return N([c],{type:n.type})}function P(n){return n&&n.__local_forage_encoded_blob}function D(n){var c=this,o=c._initReady().then(function(){var u=$[c._dbInfo.name];if(u&&u.dbReady)return u.dbReady});return L(o,n,n),o}function U(n){Q(n);for(var c=$[n.name],o=c.forages,u=0;u<o.length;u++){var d=o[u];d._dbInfo.db&&(d._dbInfo.db.close(),d._dbInfo.db=null)}return n.db=null,ve(n).then(function(l){return n.db=l,h(n)?Ce(n):l}).then(function(l){n.db=c.db=l;for(var v=0;v<o.length;v++)o[v]._dbInfo.db=l}).catch(function(l){throw ce(n,l),l})}function V(n,c,o,u){u===void 0&&(u=1);try{var d=n.db.transaction(n.storeName,c);o(null,d)}catch(l){if(u>0&&(!n.db||l.name==="InvalidStateError"||l.name==="NotFoundError"))return _.resolve().then(function(){if(!n.db||l.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),Ce(n)}).then(function(){return U(n).then(function(){V(n,c,o,u-1)})}).catch(o);o(l)}}function ee(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ke(n){var c=this,o={db:null};if(n)for(var u in n)o[u]=n[u];var d=$[o.name];d||(d=ee(),$[o.name]=d),d.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=D);var l=[];function v(){return _.resolve()}for(var E=0;E<d.forages.length;E++){var w=d.forages[E];w!==c&&l.push(w._initReady().catch(v))}var R=d.forages.slice(0);return _.all(l).then(function(){return o.db=d.db,ve(o)}).then(function(b){return o.db=b,h(o,c._defaultConfig.version)?Ce(o):b}).then(function(b){o.db=d.db=b,c._dbInfo=o;for(var T=0;T<R.length;T++){var k=R[T];k!==c&&(k._dbInfo.db=o.db,k._dbInfo.version=o.version)}})}function Pe(n,c){var o=this;n=F(n);var u=new _(function(d,l){o.ready().then(function(){V(o._dbInfo,oe,function(v,E){if(v)return l(v);try{var w=E.objectStore(o._dbInfo.storeName),R=w.get(n);R.onsuccess=function(){var b=R.result;b===void 0&&(b=null),P(b)&&(b=S(b)),d(b)},R.onerror=function(){l(R.error)}}catch(b){l(b)}})}).catch(l)});return O(u,c),u}function He(n,c){var o=this,u=new _(function(d,l){o.ready().then(function(){V(o._dbInfo,oe,function(v,E){if(v)return l(v);try{var w=E.objectStore(o._dbInfo.storeName),R=w.openCursor(),b=1;R.onsuccess=function(){var T=R.result;if(T){var k=T.value;P(k)&&(k=S(k));var j=n(k,T.key,b++);j!==void 0?d(j):T.continue()}else d()},R.onerror=function(){l(R.error)}}catch(T){l(T)}})}).catch(l)});return O(u,c),u}function Pn(n,c,o){var u=this;n=F(n);var d=new _(function(l,v){var E;u.ready().then(function(){return E=u._dbInfo,Ae.call(c)==="[object Blob]"?q(E.db).then(function(w){return w?c:I(c)}):c}).then(function(w){V(u._dbInfo,A,function(R,b){if(R)return v(R);try{var T=b.objectStore(u._dbInfo.storeName);w===null&&(w=void 0);var k=T.put(w,n);b.oncomplete=function(){w===void 0&&(w=null),l(w)},b.onabort=b.onerror=function(){var j=k.error?k.error:k.transaction.error;v(j)}}catch(j){v(j)}})}).catch(v)});return O(d,o),d}function Dn(n,c){var o=this;n=F(n);var u=new _(function(d,l){o.ready().then(function(){V(o._dbInfo,A,function(v,E){if(v)return l(v);try{var w=E.objectStore(o._dbInfo.storeName),R=w.delete(n);E.oncomplete=function(){d()},E.onerror=function(){l(R.error)},E.onabort=function(){var b=R.error?R.error:R.transaction.error;l(b)}}catch(b){l(b)}})}).catch(l)});return O(u,c),u}function $n(n){var c=this,o=new _(function(u,d){c.ready().then(function(){V(c._dbInfo,A,function(l,v){if(l)return d(l);try{var E=v.objectStore(c._dbInfo.storeName),w=E.clear();v.oncomplete=function(){u()},v.onabort=v.onerror=function(){var R=w.error?w.error:w.transaction.error;d(R)}}catch(R){d(R)}})}).catch(d)});return O(o,n),o}function Un(n){var c=this,o=new _(function(u,d){c.ready().then(function(){V(c._dbInfo,oe,function(l,v){if(l)return d(l);try{var E=v.objectStore(c._dbInfo.storeName),w=E.count();w.onsuccess=function(){u(w.result)},w.onerror=function(){d(w.error)}}catch(R){d(R)}})}).catch(d)});return O(o,n),o}function xn(n,c){var o=this,u=new _(function(d,l){if(n<0){d(null);return}o.ready().then(function(){V(o._dbInfo,oe,function(v,E){if(v)return l(v);try{var w=E.objectStore(o._dbInfo.storeName),R=!1,b=w.openKeyCursor();b.onsuccess=function(){var T=b.result;if(!T){d(null);return}n===0||R?d(T.key):(R=!0,T.advance(n))},b.onerror=function(){l(b.error)}}catch(T){l(T)}})}).catch(l)});return O(u,c),u}function Fn(n){var c=this,o=new _(function(u,d){c.ready().then(function(){V(c._dbInfo,oe,function(l,v){if(l)return d(l);try{var E=v.objectStore(c._dbInfo.storeName),w=E.openKeyCursor(),R=[];w.onsuccess=function(){var b=w.result;if(!b){u(R);return}R.push(b.key),b.continue()},w.onerror=function(){d(w.error)}}catch(b){d(b)}})}).catch(d)});return O(o,n),o}function kn(n,c){c=C.apply(this,arguments);var o=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||o.name,n.storeName=n.storeName||o.storeName);var u=this,d;if(!n.name)d=_.reject("Invalid arguments");else{var l=n.name===o.name&&u._dbInfo.db,v=l?_.resolve(u._dbInfo.db):ve(n).then(function(E){var w=$[n.name],R=w.forages;w.db=E;for(var b=0;b<R.length;b++)R[b]._dbInfo.db=E;return E});n.storeName?d=v.then(function(E){if(!!E.objectStoreNames.contains(n.storeName)){var w=E.version+1;Q(n);var R=$[n.name],b=R.forages;E.close();for(var T=0;T<b.length;T++){var k=b[T];k._dbInfo.db=null,k._dbInfo.version=w}var j=new _(function(H,z){var X=y.open(n.name,w);X.onerror=function(fe){var Ye=X.result;Ye.close(),z(fe)},X.onupgradeneeded=function(){var fe=X.result;fe.deleteObjectStore(n.storeName)},X.onsuccess=function(){var fe=X.result;fe.close(),H(fe)}});return j.then(function(H){R.db=H;for(var z=0;z<b.length;z++){var X=b[z];X._dbInfo.db=H,ae(X._dbInfo)}}).catch(function(H){throw(ce(n,H)||_.resolve()).catch(function(){}),H})}}):d=v.then(function(E){Q(n);var w=$[n.name],R=w.forages;E.close();for(var b=0;b<R.length;b++){var T=R[b];T._dbInfo.db=null}var k=new _(function(j,H){var z=y.deleteDatabase(n.name);z.onerror=function(){var X=z.result;X&&X.close(),H(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},z.onsuccess=function(){var X=z.result;X&&X.close(),j(X)}});return k.then(function(j){w.db=j;for(var H=0;H<R.length;H++){var z=R[H];ae(z._dbInfo)}}).catch(function(j){throw(ce(n,j)||_.resolve()).catch(function(){}),j})})}return O(d,c),d}var Wn={_driver:"asyncStorage",_initStorage:ke,_support:g(),iterate:He,getItem:Pe,setItem:Pn,removeItem:Dn,clear:$n,length:Un,key:xn,keys:Fn,dropInstance:kn};function Gn(){return typeof openDatabase=="function"}var Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bn="~~local_forage_type~",Zt=/^~~local_forage_type~([^~]+)~/,at="__lfsc__:",Nt=at.length,Tt="arbf",Mt="blob",er="si08",tr="ui08",rr="uic8",nr="si16",ir="si32",or="ur16",ar="ui32",sr="fl32",cr="fl64",lr=Nt+Tt.length,ur=Object.prototype.toString;function dr(n){var c=n.length*.75,o=n.length,u,d=0,l,v,E,w;n[n.length-1]==="="&&(c--,n[n.length-2]==="="&&c--);var R=new ArrayBuffer(c),b=new Uint8Array(R);for(u=0;u<o;u+=4)l=Oe.indexOf(n[u]),v=Oe.indexOf(n[u+1]),E=Oe.indexOf(n[u+2]),w=Oe.indexOf(n[u+3]),b[d++]=l<<2|v>>4,b[d++]=(v&15)<<4|E>>2,b[d++]=(E&3)<<6|w&63;return R}function Lt(n){var c=new Uint8Array(n),o="",u;for(u=0;u<c.length;u+=3)o+=Oe[c[u]>>2],o+=Oe[(c[u]&3)<<4|c[u+1]>>4],o+=Oe[(c[u+1]&15)<<2|c[u+2]>>6],o+=Oe[c[u+2]&63];return c.length%3===2?o=o.substring(0,o.length-1)+"=":c.length%3===1&&(o=o.substring(0,o.length-2)+"=="),o}function Vn(n,c){var o="";if(n&&(o=ur.call(n)),n&&(o==="[object ArrayBuffer]"||n.buffer&&ur.call(n.buffer)==="[object ArrayBuffer]")){var u,d=at;n instanceof ArrayBuffer?(u=n,d+=Tt):(u=n.buffer,o==="[object Int8Array]"?d+=er:o==="[object Uint8Array]"?d+=tr:o==="[object Uint8ClampedArray]"?d+=rr:o==="[object Int16Array]"?d+=nr:o==="[object Uint16Array]"?d+=or:o==="[object Int32Array]"?d+=ir:o==="[object Uint32Array]"?d+=ar:o==="[object Float32Array]"?d+=sr:o==="[object Float64Array]"?d+=cr:c(new Error("Failed to get type for BinaryArray"))),c(d+Lt(u))}else if(o==="[object Blob]"){var l=new FileReader;l.onload=function(){var v=Bn+n.type+"~"+Lt(this.result);c(at+Mt+v)},l.readAsArrayBuffer(n)}else try{c(JSON.stringify(n))}catch(v){console.error("Couldn't convert value into a JSON string: ",n),c(null,v)}}function jn(n){if(n.substring(0,Nt)!==at)return JSON.parse(n);var c=n.substring(lr),o=n.substring(Nt,lr),u;if(o===Mt&&Zt.test(c)){var d=c.match(Zt);u=d[1],c=c.substring(d[0].length)}var l=dr(c);switch(o){case Tt:return l;case Mt:return N([l],{type:u});case er:return new Int8Array(l);case tr:return new Uint8Array(l);case rr:return new Uint8ClampedArray(l);case nr:return new Int16Array(l);case or:return new Uint16Array(l);case ir:return new Int32Array(l);case ar:return new Uint32Array(l);case sr:return new Float32Array(l);case cr:return new Float64Array(l);default:throw new Error("Unkown type: "+o)}}var Ct={serialize:Vn,deserialize:jn,stringToBuffer:dr,bufferToString:Lt};function fr(n,c,o,u){n.executeSql("CREATE TABLE IF NOT EXISTS "+c.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],o,u)}function qn(n){var c=this,o={db:null};if(n)for(var u in n)o[u]=typeof n[u]!="string"?n[u].toString():n[u];var d=new _(function(l,v){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(E){return v(E)}o.db.transaction(function(E){fr(E,o,function(){c._dbInfo=o,l()},function(w,R){v(R)})},v)});return o.serializer=Ct,d}function Ne(n,c,o,u,d,l){n.executeSql(o,u,d,function(v,E){E.code===E.SYNTAX_ERR?v.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[c.storeName],function(w,R){R.rows.length?l(w,E):fr(w,c,function(){w.executeSql(o,u,d,l)},l)},l):l(v,E)},l)}function Hn(n,c){var o=this;n=F(n);var u=new _(function(d,l){o.ready().then(function(){var v=o._dbInfo;v.db.transaction(function(E){Ne(E,v,"SELECT * FROM "+v.storeName+" WHERE key = ? LIMIT 1",[n],function(w,R){var b=R.rows.length?R.rows.item(0).value:null;b&&(b=v.serializer.deserialize(b)),d(b)},function(w,R){l(R)})})}).catch(l)});return O(u,c),u}function Kn(n,c){var o=this,u=new _(function(d,l){o.ready().then(function(){var v=o._dbInfo;v.db.transaction(function(E){Ne(E,v,"SELECT * FROM "+v.storeName,[],function(w,R){for(var b=R.rows,T=b.length,k=0;k<T;k++){var j=b.item(k),H=j.value;if(H&&(H=v.serializer.deserialize(H)),H=n(H,j.key,k+1),H!==void 0){d(H);return}}d()},function(w,R){l(R)})})}).catch(l)});return O(u,c),u}function hr(n,c,o,u){var d=this;n=F(n);var l=new _(function(v,E){d.ready().then(function(){c===void 0&&(c=null);var w=c,R=d._dbInfo;R.serializer.serialize(c,function(b,T){T?E(T):R.db.transaction(function(k){Ne(k,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[n,b],function(){v(w)},function(j,H){E(H)})},function(k){if(k.code===k.QUOTA_ERR){if(u>0){v(hr.apply(d,[n,w,o,u-1]));return}E(k)}})})}).catch(E)});return O(l,o),l}function Yn(n,c,o){return hr.apply(this,[n,c,o,1])}function Xn(n,c){var o=this;n=F(n);var u=new _(function(d,l){o.ready().then(function(){var v=o._dbInfo;v.db.transaction(function(E){Ne(E,v,"DELETE FROM "+v.storeName+" WHERE key = ?",[n],function(){d()},function(w,R){l(R)})})}).catch(l)});return O(u,c),u}function zn(n){var c=this,o=new _(function(u,d){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(v){Ne(v,l,"DELETE FROM "+l.storeName,[],function(){u()},function(E,w){d(w)})})}).catch(d)});return O(o,n),o}function Jn(n){var c=this,o=new _(function(u,d){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(v){Ne(v,l,"SELECT COUNT(key) as c FROM "+l.storeName,[],function(E,w){var R=w.rows.item(0).c;u(R)},function(E,w){d(w)})})}).catch(d)});return O(o,n),o}function Qn(n,c){var o=this,u=new _(function(d,l){o.ready().then(function(){var v=o._dbInfo;v.db.transaction(function(E){Ne(E,v,"SELECT key FROM "+v.storeName+" WHERE id = ? LIMIT 1",[n+1],function(w,R){var b=R.rows.length?R.rows.item(0).key:null;d(b)},function(w,R){l(R)})})}).catch(l)});return O(u,c),u}function Zn(n){var c=this,o=new _(function(u,d){c.ready().then(function(){var l=c._dbInfo;l.db.transaction(function(v){Ne(v,l,"SELECT key FROM "+l.storeName,[],function(E,w){for(var R=[],b=0;b<w.rows.length;b++)R.push(w.rows.item(b).key);u(R)},function(E,w){d(w)})})}).catch(d)});return O(o,n),o}function ei(n){return new _(function(c,o){n.transaction(function(u){u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(d,l){for(var v=[],E=0;E<l.rows.length;E++)v.push(l.rows.item(E).name);c({db:n,storeNames:v})},function(d,l){o(l)})},function(u){o(u)})})}function ti(n,c){c=C.apply(this,arguments);var o=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||o.name,n.storeName=n.storeName||o.storeName);var u=this,d;return n.name?d=new _(function(l){var v;n.name===o.name?v=u._dbInfo.db:v=openDatabase(n.name,"","",0),n.storeName?l({db:v,storeNames:[n.storeName]}):l(ei(v))}).then(function(l){return new _(function(v,E){l.db.transaction(function(w){function R(j){return new _(function(H,z){w.executeSql("DROP TABLE IF EXISTS "+j,[],function(){H()},function(X,fe){z(fe)})})}for(var b=[],T=0,k=l.storeNames.length;T<k;T++)b.push(R(l.storeNames[T]));_.all(b).then(function(){v()}).catch(function(j){E(j)})},function(w){E(w)})})}):d=_.reject("Invalid arguments"),O(d,c),d}var ri={_driver:"webSQLStorage",_initStorage:qn,_support:Gn(),iterate:Kn,getItem:Hn,setItem:Yn,removeItem:Xn,clear:zn,length:Jn,key:Qn,keys:Zn,dropInstance:ti};function ni(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function mr(n,c){var o=n.name+"/";return n.storeName!==c.storeName&&(o+=n.storeName+"/"),o}function ii(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function oi(){return!ii()||localStorage.length>0}function ai(n){var c=this,o={};if(n)for(var u in n)o[u]=n[u];return o.keyPrefix=mr(n,c._defaultConfig),oi()?(c._dbInfo=o,o.serializer=Ct,_.resolve()):_.reject()}function si(n){var c=this,o=c.ready().then(function(){for(var u=c._dbInfo.keyPrefix,d=localStorage.length-1;d>=0;d--){var l=localStorage.key(d);l.indexOf(u)===0&&localStorage.removeItem(l)}});return O(o,n),o}function ci(n,c){var o=this;n=F(n);var u=o.ready().then(function(){var d=o._dbInfo,l=localStorage.getItem(d.keyPrefix+n);return l&&(l=d.serializer.deserialize(l)),l});return O(u,c),u}function li(n,c){var o=this,u=o.ready().then(function(){for(var d=o._dbInfo,l=d.keyPrefix,v=l.length,E=localStorage.length,w=1,R=0;R<E;R++){var b=localStorage.key(R);if(b.indexOf(l)===0){var T=localStorage.getItem(b);if(T&&(T=d.serializer.deserialize(T)),T=n(T,b.substring(v),w++),T!==void 0)return T}}});return O(u,c),u}function ui(n,c){var o=this,u=o.ready().then(function(){var d=o._dbInfo,l;try{l=localStorage.key(n)}catch{l=null}return l&&(l=l.substring(d.keyPrefix.length)),l});return O(u,c),u}function di(n){var c=this,o=c.ready().then(function(){for(var u=c._dbInfo,d=localStorage.length,l=[],v=0;v<d;v++){var E=localStorage.key(v);E.indexOf(u.keyPrefix)===0&&l.push(E.substring(u.keyPrefix.length))}return l});return O(o,n),o}function fi(n){var c=this,o=c.keys().then(function(u){return u.length});return O(o,n),o}function hi(n,c){var o=this;n=F(n);var u=o.ready().then(function(){var d=o._dbInfo;localStorage.removeItem(d.keyPrefix+n)});return O(u,c),u}function mi(n,c,o){var u=this;n=F(n);var d=u.ready().then(function(){c===void 0&&(c=null);var l=c;return new _(function(v,E){var w=u._dbInfo;w.serializer.serialize(c,function(R,b){if(b)E(b);else try{localStorage.setItem(w.keyPrefix+n,R),v(l)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(T),E(T)}})})});return O(d,o),d}function vi(n,c){if(c=C.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var o=this.config();n.name=n.name||o.name,n.storeName=n.storeName||o.storeName}var u=this,d;return n.name?d=new _(function(l){n.storeName?l(mr(n,u._defaultConfig)):l(n.name+"/")}).then(function(l){for(var v=localStorage.length-1;v>=0;v--){var E=localStorage.key(v);E.indexOf(l)===0&&localStorage.removeItem(E)}}):d=_.reject("Invalid arguments"),O(d,c),d}var pi={_driver:"localStorageWrapper",_initStorage:ai,_support:ni(),iterate:li,getItem:ci,setItem:mi,removeItem:hi,clear:si,length:fi,key:ui,keys:di,dropInstance:vi},yi=function(c,o){return c===o||typeof c=="number"&&typeof o=="number"&&isNaN(c)&&isNaN(o)},gi=function(c,o){for(var u=c.length,d=0;d<u;){if(yi(c[d],o))return!0;d++}return!1},vr=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},Ke={},pr={},We={INDEXEDDB:Wn,WEBSQL:ri,LOCALSTORAGE:pi},Ei=[We.INDEXEDDB._driver,We.WEBSQL._driver,We.LOCALSTORAGE._driver],st=["dropInstance"],Pt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(st),_i={description:"",driver:Ei.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ii(n,c){n[c]=function(){var o=arguments;return n.ready().then(function(){return n[c].apply(n,o)})}}function Dt(){for(var n=1;n<arguments.length;n++){var c=arguments[n];if(c)for(var o in c)c.hasOwnProperty(o)&&(vr(c[o])?arguments[0][o]=c[o].slice():arguments[0][o]=c[o])}return arguments[0]}var wi=function(){function n(c){f(this,n);for(var o in We)if(We.hasOwnProperty(o)){var u=We[o],d=u._driver;this[o]=d,Ke[d]||this.defineDriver(u)}this._defaultConfig=Dt({},_i),this._config=Dt({},this._defaultConfig,c),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(o){if((typeof o>"u"?"undefined":m(o))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var u in o){if(u==="storeName"&&(o[u]=o[u].replace(/\W/g,"_")),u==="version"&&typeof o[u]!="number")return new Error("Database version must be a number.");this._config[u]=o[u]}return"driver"in o&&o.driver?this.setDriver(this._config.driver):!0}else return typeof o=="string"?this._config[o]:this._config},n.prototype.defineDriver=function(o,u,d){var l=new _(function(v,E){try{var w=o._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!o._driver){E(R);return}for(var b=Pt.concat("_initStorage"),T=0,k=b.length;T<k;T++){var j=b[T],H=!gi(st,j);if((H||o[j])&&typeof o[j]!="function"){E(R);return}}var z=function(){for(var Ye=function(Si){return function(){var Ai=new Error("Method "+Si+" is not implemented by the current driver"),yr=_.reject(Ai);return O(yr,arguments[arguments.length-1]),yr}},$t=0,bi=st.length;$t<bi;$t++){var Ut=st[$t];o[Ut]||(o[Ut]=Ye(Ut))}};z();var X=function(Ye){Ke[w]&&console.info("Redefining LocalForage driver: "+w),Ke[w]=o,pr[w]=Ye,v()};"_support"in o?o._support&&typeof o._support=="function"?o._support().then(X,E):X(!!o._support):X(!0)}catch(fe){E(fe)}});return L(l,u,d),l},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(o,u,d){var l=Ke[o]?_.resolve(Ke[o]):_.reject(new Error("Driver not found."));return L(l,u,d),l},n.prototype.getSerializer=function(o){var u=_.resolve(Ct);return L(u,o),u},n.prototype.ready=function(o){var u=this,d=u._driverSet.then(function(){return u._ready===null&&(u._ready=u._initDriver()),u._ready});return L(d,o,o),d},n.prototype.setDriver=function(o,u,d){var l=this;vr(o)||(o=[o]);var v=this._getSupportedDrivers(o);function E(){l._config.driver=l.driver()}function w(T){return l._extend(T),E(),l._ready=l._initStorage(l._config),l._ready}function R(T){return function(){var k=0;function j(){for(;k<T.length;){var H=T[k];return k++,l._dbInfo=null,l._ready=null,l.getDriver(H).then(w).catch(j)}E();var z=new Error("No available storage method found.");return l._driverSet=_.reject(z),l._driverSet}return j()}}var b=this._driverSet!==null?this._driverSet.catch(function(){return _.resolve()}):_.resolve();return this._driverSet=b.then(function(){var T=v[0];return l._dbInfo=null,l._ready=null,l.getDriver(T).then(function(k){l._driver=k._driver,E(),l._wrapLibraryMethodsWithReady(),l._initDriver=R(v)})}).catch(function(){E();var T=new Error("No available storage method found.");return l._driverSet=_.reject(T),l._driverSet}),L(this._driverSet,u,d),this._driverSet},n.prototype.supports=function(o){return!!pr[o]},n.prototype._extend=function(o){Dt(this,o)},n.prototype._getSupportedDrivers=function(o){for(var u=[],d=0,l=o.length;d<l;d++){var v=o[d];this.supports(v)&&u.push(v)}return u},n.prototype._wrapLibraryMethodsWithReady=function(){for(var o=0,u=Pt.length;o<u;o++)Ii(this,Pt[o])},n.prototype.createInstance=function(o){return new n(o)},n}(),Ri=new wi;a.exports=Ri},{3:3}]},{},[4])(4)})});var Mn=wr((St,Tn)=>{(function(e,t){typeof St=="object"&&typeof Tn<"u"?t(St):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],t):t(e.LocalforageDriverMemory={})})(typeof self<"u"?self:St,function(e){"use strict";var t="localforage-driver-memory";function r(h){var I=typeof Symbol=="function"&&h[Symbol.iterator],S=0;return I?I.call(h):{next:function(){return h&&S>=h.length&&(h=void 0),{value:h&&h[S++],done:!h}}}}function i(h,I){h=h||[],I=I||{};try{return new Blob(h,I)}catch(U){if(U.name!=="TypeError")throw U;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,P=new S,D=0;D<h.length;D+=1)P.append(h[D]);return P.getBlob(I.type)}}var a=/^~~local_forage_type~([^~]+)~/,s=9,m=s+4,f=Object.prototype.toString;function p(h){var I=h.length*.75,S=h.length;h[h.length-1]==="="&&(I--,h[h.length-2]==="="&&I--);for(var P=new ArrayBuffer(I),D=new Uint8Array(P),U=0,V=0;U<S;U+=4){var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[U]),ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[U+1]),Pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[U+2]),He="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[U+3]);D[V++]=ee<<2|ke>>4,D[V++]=(ke&15)<<4|Pe>>2,D[V++]=(Pe&3)<<6|He&63}return P}function y(h){for(var I=new Uint8Array(h),S="",P=0;P<I.length;P+=3)S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P]>>2],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P]&3)<<4|I[P+1]>>4],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(I[P+1]&15)<<2|I[P+2]>>6],S+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[I[P+2]&63];return I.length%3===2?S=S.substring(0,S.length-1)+"=":I.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function g(h,I){var S="";if(h&&(S=f.call(h)),h&&(S==="[object ArrayBuffer]"||h.buffer&&f.call(h.buffer)==="[object ArrayBuffer]")){var P=void 0,D="__lfsc__:";h instanceof ArrayBuffer?(P=h,D+="arbf"):(P=h.buffer,S==="[object Int8Array]"?D+="si08":S==="[object Uint8Array]"?D+="ui08":S==="[object Uint8ClampedArray]"?D+="uic8":S==="[object Int16Array]"?D+="si16":S==="[object Uint16Array]"?D+="ur16":S==="[object Int32Array]"?D+="si32":S==="[object Uint32Array]"?D+="ui32":S==="[object Float32Array]"?D+="fl32":S==="[object Float64Array]"?D+="fl64":I(new Error("Failed to get type for BinaryArray"))),I(D+y(P))}else if(S==="[object Blob]"){var U=new FileReader;U.onload=function(){var V="~~local_forage_type~"+h.type+"~"+y(this.result);I("__lfsc__:blob"+V)},U.readAsArrayBuffer(h)}else try{I(JSON.stringify(h))}catch(V){console.error("Couldn't convert value into a JSON string: ",h),I(null,V)}}function N(h){if(h.substring(0,s)!=="__lfsc__:")return JSON.parse(h);var I=h.substring(m),S=h.substring(s,m),P;if(S==="blob"&&a.test(I)){var D=I.match(a);P=D[1],I=I.substring(D[0].length)}var U=p(I);switch(S){case"arbf":return U;case"blob":return i([U],{type:P});case"si08":return new Int8Array(U);case"ui08":return new Uint8Array(U);case"uic8":return new Uint8ClampedArray(U);case"si16":return new Int16Array(U);case"ur16":return new Uint16Array(U);case"si32":return new Int32Array(U);case"ui32":return new Uint32Array(U);case"fl32":return new Float32Array(U);case"fl64":return new Float64Array(U);default:throw new Error("Unkown type: "+S)}}function _(h){var I,S;if(h===null||typeof h!="object"||"isActiveClone"in h)return h;var P=h instanceof Date?new Date(h):h.constructor();try{for(var D=r(Object.keys(h)),U=D.next();!U.done;U=D.next()){var V=U.value;Object.prototype.hasOwnProperty.call(h,V)&&(h.isActiveClone=null,P[V]=_(h[V]),delete h.isActiveClone)}}catch(ee){I={error:ee}}finally{try{U&&!U.done&&(S=D.return)&&S.call(D)}finally{if(I)throw I.error}}return P}function O(h,I){return(h.name||I.name)+"/"+(h.storeName||I.storeName)+"/"}function L(h,I){I&&h.then(function(S){I(null,S)},function(S){I(S)})}function F(){for(var h=[],I=0;I<arguments.length;I++)h[I]=arguments[I];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function C(h,I){var S=this;if(I=F.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var P=this.config();h.name=h.name||P.name,h.storeName=h.storeName||P.storeName}var D;return h.name?D=new Promise(function(U){h.storeName?U(O(h,S._defaultConfig)):U(h.name+"/")}):D=Promise.reject("Invalid arguments"),{promise:D,callback:I}}function G(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}var J={bufferToString:y,deserialize:N,serialize:g,stringToBuffer:p},$={},Ae=function(){function h(I){this.kp=I,this.data={}}return h.resolve=function(I){return $[I]||($[I]=new h(I)),$[I]},h.prototype.clear=function(){this.data={}},h.prototype.drop=function(){this.clear(),delete $[this.kp]},h.prototype.get=function(I){return this.data[I]},h.prototype.key=function(I){return this.keys()[I]},h.prototype.keys=function(){return Object.keys(this.data)},h.prototype.rm=function(I){delete this.data[I]},h.prototype.set=function(I,S){this.data[I]=S},h}();function oe(h){var I=h?_(h):{},S=O(I,this._defaultConfig),P=Ae.resolve(S);return this._dbInfo=I,this._dbInfo.serializer=J,this._dbInfo.keyPrefix=S,this._dbInfo.mStore=P,Promise.resolve()}function A(h){var I=this,S=this.ready().then(function(){I._dbInfo.mStore.clear()});return L(S,h),S}function B(h,I){var S=C.apply(this,arguments),P=S.promise,D=S.callback,U=P.then(function(V){Ae.resolve(V).drop()});return L(U,D),P}function x(h,I){var S=this;h=G(h);var P=this.ready().then(function(){var D=S._dbInfo.mStore.get(h);return D==null?null:S._dbInfo.serializer.deserialize(D)});return L(P,I),P}function q(h,I){var S=this,P=this.ready().then(function(){for(var D=S._dbInfo.mStore,U=D.keys(),V=0;V<U.length;V++){var ee=D.get(U[V]);if(ee&&(ee=S._dbInfo.serializer.deserialize(ee)),ee=h(ee,U[V],V+1),ee!==void 0)return ee}});return L(P,I),P}function Q(h,I){var S=this,P=this.ready().then(function(){var D;try{D=S._dbInfo.mStore.key(h),D===void 0&&(D=null)}catch{D=null}return D});return L(P,I),P}function ae(h){var I=this,S=this.ready().then(function(){return I._dbInfo.mStore.keys()});return L(S,h),S}function ce(h){var I=this.keys().then(function(S){return S.length});return L(I,h),I}function le(h,I){var S=this;h=G(h);var P=this.ready().then(function(){S._dbInfo.mStore.rm(h)});return L(P,I),P}function ve(h,I,S){var P=this;h=G(h);var D=this.ready().then(function(){I===void 0&&(I=null);var U=I;return new Promise(function(V,ee){P._dbInfo.serializer.serialize(I,function(ke,Pe){if(Pe)ee(Pe);else try{P._dbInfo.mStore.set(h,ke),V(U)}catch(He){ee(He)}})})});return L(D,S),D}var Ce=!0;e._support=Ce,e._driver=t,e._initStorage=oe,e.clear=A,e.dropInstance=B,e.getItem=x,e.iterate=q,e.key=Q,e.keys=ae,e.length=ce,e.removeItem=le,e.setItem=ve,Object.defineProperty(e,"__esModule",{value:!0})})});var Fa={};Rr(Fa,{default:()=>xa});var Ie=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(Ie||{}),we=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e.ProductAnnouncement="ANNOUNCEMENT",e))(we||{}),Ge=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))(Ge||{}),Ee=(e=>(e.PROVIDER="magic_3pw_provider",e.ADDRESS="magic_3pw_address",e.CHAIN_ID="magic_3pw_chainId",e))(Ee||{}),Ar=(e=>(e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e.Web3ModalSelected="web3modal_selected",e))(Ar||{}),M=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.NFTCheckout="magic_nft_checkout",e.NFTTransfer="magic_nft_transfer",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e.ShowNFTs="magic_show_nfts",e.ShowOnRamp="magic_show_fiat_onramp",e.ShowSendTokensUI="magic_show_send_tokens_ui",e.ShowAddress="magic_show_address",e.ShowBalances="magic_show_balances",e.SendGaslessTransaction="eth_sendGaslessTransaction",e.RevealPK="magic_reveal_key",e.EnableMFA="magic_auth_enable_mfa_flow",e.DisableMFA="magic_auth_disable_mfa_flow",e))(M||{}),xt=["magic_intermediary_event","magic_nft_checkout","mc_login"],he=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e.MAGIC_SEND_PRODUCT_ANNOUNCEMENT="MAGIC_SEND_PRODUCT_ANNOUNCEMENT",e.MAGIC_PONG="MAGIC_PONG",e.MAGIC_POPUP_RESPONSE="MAGIC_POPUP_RESPONSE",e.MAGIC_POPUP_OAUTH_VERIFY_RESPONSE="MAGIC_POPUP_OAUTH_VERIFY_RESPONSE",e))(he||{}),Re=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e.MAGIC_PING="MAGIC_PING",e))(Re||{}),Or=(e=>(e.UpdateEmail="update-email",e.MFA="mfa",e.Recovery="recovery",e))(Or||{}),Nr=(e=>(e.Retry="retry",e))(Nr||{}),Tr=(e=>(e.EmailSent="email-sent",e.EmailNotDeliverable="email-not-deliverable",e))(Tr||{}),de=(e=>(e.VerifyEmailOtp="verify-email-otp",e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.VerifyRecoveryCode="verify-recovery-code",e.Cancel="cancel",e))(de||{}),De=(e=>(e.VerifySmsOtp="verify-sms-otp",e.Cancel="cancel",e.Retry="retry",e))(De||{}),Mr=(e=>(e.SmsOTPSent="sms-otp-sent",e.InvalidSmsOtp="invalid-sms-otp",e.ExpiredSmsOtp="expired-sms-otp",e))(Mr||{}),Lr=(e=>(e.EmailOTPSent="email-otp-sent",e.InvalidEmailOtp="invalid-email-otp",e.InvalidMfaOtp="invalid-mfa-otp",e.ExpiredEmailOtp="expired-email-otp",e.MfaSentHandle="mfa-sent-handle",e.RecoveryCodeSentHandle="recovery-code-sent-handle",e.InvalidRecoveryCode="invalid-recovery-code",e.RecoveryCodeSuccess="recovery-code-success",e))(Lr||{}),Je=(e=>(e.Retry="device-retry",e))(Je||{}),Cr=(e=>(e.DeviceApproved="device-approved",e.DeviceNeedsApproval="device-needs-approval",e.DeviceVerificationLinkExpired="device-verification-link-expired",e.DeviceVerificationEmailSent="device-verification-email-sent",e))(Cr||{}),ue=(e=>(e.Retry="Recency/auth-factor-retry",e.Cancel="Recency/auth-factor-verification-cancel",e.VerifyEmailOtp="Recency/auth-factor-verify-email-otp",e.VerifyMFACode="Recency/verify-mfa-code",e))(ue||{}),Pr=(e=>(e.PrimaryAuthFactorNeedsVerification="Recency/auth-factor-needs-verification",e.PrimaryAuthFactorVerified="Recency/auth-factor-verified",e.InvalidEmailOtp="Recency/auth-factor-invalid-email-otp",e.EmailExpired="Recency/auth-factor-verification-email-expired",e.EmailSent="Recency/auth-factor-verification-email-sent",e.EmailNotDeliverable="Recency/auth-factor-verification-email-not-deliverable",e))(Pr||{}),ne=(e=>(e.RetryWithNewEmail="UpdateEmail/retry-with-new-email",e.Cancel="UpdateEmail/new-email-verification-cancel",e.VerifyEmailOtp="UpdateEmail/new-email-verify-otp",e))(ne||{}),Dr=(e=>(e.NewAuthFactorNeedsVerification="UpdateEmail/new-email-needs-verification",e.EmailUpdated="UpdateEmail/email-updated",e.InvalidEmailOtp="UpdateEmail/new-email-invalid-email-otp",e.EmailExpired="UpdateEmail/new-email-verification-email-expired",e.EmailSent="UpdateEmail/new-email-verification-email-sent",e.EmailNotDeliverable="UpdateEmail/new-email-verification-email-not-deliverable",e.InvalidEmail="UpdateEmail/new-email-invalid",e.EmailAlreadyExists="UpdateEmail/new-email-already-exists",e))(Dr||{}),$r=(e=>(e.IDTokenCreated="Auth/id-token-created",e))($r||{}),Ur=(e=>(e.Cancel="Farcaster/cancel",e))(Ur||{}),xr=(e=>(e.MFASecretGenerated="mfa-secret-generated",e.InvalidMFAOtp="invalid-mfa-otp",e.MFARecoveryCodes="mfa-recovery-codes",e))(xr||{}),$e=(e=>(e.VerifyMFACode="verify-mfa-code",e.Cancel="cancel-mfa-setup",e))($e||{}),Fr=(e=>(e.MFACodeRequested="mfa-code-requested",e.InvalidMFAOtp="invalid-mfa-otp",e.InvalidRecoveryCode="invalid-recovery-code",e))(Fr||{}),be=(e=>(e.VerifyMFACode="verify-mfa-code",e.LostDevice="lost-device",e.Cancel="cancel-mfa-disable",e))(be||{}),kr=(e=>(e.Harmony="HARMONY",e))(kr||{}),ct=(e=>(e.ClosedByUser="closed-by-user",e))(ct||{}),lt=(e=>(e.ClosedByUser="closed-by-user-on-received",e))(lt||{}),Wr=(e=>(e.EnterNewPhoneNumber="enter-new-phone-number",e.EnterOtpCode="enter-otp-code",e.RecoveryFactorAlreadyExists="recovery-factor-already-exists",e.MalformedPhoneNumber="malformed-phone-number",e.InvalidOtpCode="invalid-otp-code",e))(Wr||{}),pe=(e=>(e.SendNewPhoneNumber="send-new-phone-number",e.SendOtpCode="send-otp-code",e.Cancel="cancel",e.StartEditPhoneNumber="start-edit-phone-number",e))(pe||{}),Gr=(e=>(e.PhoneNumber="phone_number",e))(Gr||{}),Br=(e=>(e.SmsOtpSent="sms-otp-sent",e.LoginThrottled="login-throttled",e.InvalidSmsOtp="invalid-sms-otp",e.SmsVerified="sms-verified",e.AccountRecovered="account-recovered",e.UpdateEmailRequired="update-email-required",e))(Br||{}),ye=(e=>(e.Cancel="cancel",e.VerifyOtp="verify-otp-code",e.ResendSms="resend-sms-otp",e.UpdateEmail="update-email",e))(ye||{}),Ue=(e=>(e.Success="nft-checkout-success",e.Failure="nft-checkout-failure",e.Initiated="nft-checkout-initiated",e.Disconnect="disconnect",e))(Ue||{}),Vr=(e=>(e.WalletInfoFetched="Wallet/wallet-info-fetched",e))(Vr||{}),jr=(e=>(e.CloseMagicWindow="close-magic-window",e))(jr||{});var Pi=Object.create,_t=Object.defineProperty,Di=Object.defineProperties,$i=Object.getOwnPropertyDescriptor,Ui=Object.getOwnPropertyDescriptors,xi=Object.getOwnPropertyNames,qr=Object.getOwnPropertySymbols,Fi=Object.getPrototypeOf,an=Object.prototype.hasOwnProperty,ki=Object.prototype.propertyIsEnumerable,Hr=(e,t,r)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,It=(e,t)=>{for(var r in t||(t={}))an.call(t,r)&&Hr(e,r,t[r]);if(qr)for(var r of qr(t))ki.call(t,r)&&Hr(e,r,t[r]);return e},Wt=(e,t)=>Di(e,Ui(t)),Wi=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Gi=(e,t)=>{for(var r in t)_t(e,r,{get:t[r],enumerable:!0})},Bi=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of xi(t))!an.call(e,a)&&a!==r&&_t(e,a,{get:()=>t[a],enumerable:!(i=$i(t,a))||i.enumerable});return e},Vi=(e,t,r)=>(r=e!=null?Pi(Fi(e)):{},Bi(t||!e||!e.__esModule?_t(r,"default",{value:e,enumerable:!0}):r,e)),Z=(e,t,r)=>new Promise((i,a)=>{var s=p=>{try{f(r.next(p))}catch(y){a(y)}},m=p=>{try{f(r.throw(p))}catch(y){a(y)}},f=p=>p.done?i(p.value):Promise.resolve(p.value).then(s,m);f((r=r.apply(e,t)).next())}),ji=Wi((e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function s(y,g,N){this.fn=y,this.context=g,this.once=N||!1}function m(y,g,N,_,O){if(typeof N!="function")throw new TypeError("The listener must be a function");var L=new s(N,_||y,O),F=i?i+g:g;return y._events[F]?y._events[F].fn?y._events[F]=[y._events[F],L]:y._events[F].push(L):(y._events[F]=L,y._eventsCount++),y}function f(y,g){--y._eventsCount===0?y._events=new a:delete y._events[g]}function p(){this._events=new a,this._eventsCount=0}p.prototype.eventNames=function(){var y=[],g,N;if(this._eventsCount===0)return y;for(N in g=this._events)r.call(g,N)&&y.push(i?N.slice(1):N);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(g)):y},p.prototype.listeners=function(y){var g=i?i+y:y,N=this._events[g];if(!N)return[];if(N.fn)return[N.fn];for(var _=0,O=N.length,L=new Array(O);_<O;_++)L[_]=N[_].fn;return L},p.prototype.listenerCount=function(y){var g=i?i+y:y,N=this._events[g];return N?N.fn?1:N.length:0},p.prototype.emit=function(y,g,N,_,O,L){var F=i?i+y:y;if(!this._events[F])return!1;var C=this._events[F],G=arguments.length,J,$;if(C.fn){switch(C.once&&this.removeListener(y,C.fn,void 0,!0),G){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,g),!0;case 3:return C.fn.call(C.context,g,N),!0;case 4:return C.fn.call(C.context,g,N,_),!0;case 5:return C.fn.call(C.context,g,N,_,O),!0;case 6:return C.fn.call(C.context,g,N,_,O,L),!0}for($=1,J=new Array(G-1);$<G;$++)J[$-1]=arguments[$];C.fn.apply(C.context,J)}else{var Ae=C.length,oe;for($=0;$<Ae;$++)switch(C[$].once&&this.removeListener(y,C[$].fn,void 0,!0),G){case 1:C[$].fn.call(C[$].context);break;case 2:C[$].fn.call(C[$].context,g);break;case 3:C[$].fn.call(C[$].context,g,N);break;case 4:C[$].fn.call(C[$].context,g,N,_);break;default:if(!J)for(oe=1,J=new Array(G-1);oe<G;oe++)J[oe-1]=arguments[oe];C[$].fn.apply(C[$].context,J)}}return!0},p.prototype.on=function(y,g,N){return m(this,y,g,N,!1)},p.prototype.once=function(y,g,N){return m(this,y,g,N,!0)},p.prototype.removeListener=function(y,g,N,_){var O=i?i+y:y;if(!this._events[O])return this;if(!g)return f(this,O),this;var L=this._events[O];if(L.fn)L.fn===g&&(!_||L.once)&&(!N||L.context===N)&&f(this,O);else{for(var F=0,C=[],G=L.length;F<G;F++)(L[F].fn!==g||_&&!L[F].once||N&&L[F].context!==N)&&C.push(L[F]);C.length?this._events[O]=C.length===1?C[0]:C:f(this,O)}return this},p.prototype.removeAllListeners=function(y){var g;return y?(g=i?i+y:y,this._events[g]&&f(this,g)):(this._events=new a,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=i,p.EventEmitter=p,typeof t<"u"&&(t.exports=p)});function qi(e){let t={exports:{}};return e(t,t.exports),t.exports}var Hi=Number.MAX_SAFE_INTEGER||9007199254740991,Gt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Hi,MAX_SAFE_COMPONENT_LENGTH:16},Ki=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},K=Ki,ot=qi(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=Gt,i=(t=e.exports={}).re=[],a=t.src=[],s=t.t={},m=0,f=(p,y,g)=>{let N=m++;K(N,y),s[p]=N,a[N]=y,i[N]=new RegExp(y,g?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","[0-9]+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),f("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER","[0-9A-Za-z-]+"),f("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),f("FULL",`^${a[s.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),f("LOOSE",`^${a[s.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),f("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",a[s.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0.0.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Kr=/^[0-9]+$/,sn=(e,t)=>{let r=Kr.test(e),i=Kr.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},Yi=(e,t)=>sn(t,e),Xi={compareIdentifiers:sn,rcompareIdentifiers:Yi},{MAX_LENGTH:Yr,MAX_SAFE_INTEGER:ut}=Gt,{re:Xr,t:zr}=ot,{compareIdentifiers:Qe}=Xi,te=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Yr)throw new TypeError(`version is longer than ${Yr} characters`);K("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Xr[zr.LOOSE]:Xr[zr.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ut||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ut||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ut||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let a=+i;if(a>=0&&a<ut)return a}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(K("SemVer.compare",this.version,this.options,e),!(e instanceof te)){if(typeof e=="string"&&e===this.version)return 0;e=new te(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof te||(e=new te(e,this.options)),Qe(this.major,e.major)||Qe(this.minor,e.minor)||Qe(this.patch,e.patch)}comparePre(e){if(e instanceof te||(e=new te(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(K("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return Qe(r,i)}while(++t)}compareBuild(e){e instanceof te||(e=new te(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(K("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r!==i)return Qe(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},zi=(e,t,r)=>new te(e,r).compare(new te(t,r)),qe=zi,Ji=(e,t,r)=>qe(e,t,r)===0,Qi=Ji,Zi=(e,t,r)=>qe(e,t,r)!==0,eo=Zi,to=(e,t,r)=>qe(e,t,r)>0,ro=to,no=(e,t,r)=>qe(e,t,r)>=0,io=no,oo=(e,t,r)=>qe(e,t,r)<0,ao=oo,so=(e,t,r)=>qe(e,t,r)<=0,co=so,lo=(e,t,r,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Qi(e,r,i);case"!=":return eo(e,r,i);case">":return ro(e,r,i);case">=":return io(e,r,i);case"<":return ao(e,r,i);case"<=":return co(e,r,i);default:throw new TypeError(`Invalid operator: ${t}`)}},Ft=lo,Ze=Symbol("SemVer ANY"),nt=class{static get ANY(){return Ze}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof nt){if(e.loose===!!t.loose)return e;e=e.value}K("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ze?this.value="":this.value=this.operator+this.semver.version,K("comp",this)}parse(e){let t=this.options.loose?Jr[Qr.COMPARATORLOOSE]:Jr[Qr.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new te(r[2],this.options.loose):this.semver=Ze}toString(){return this.value}test(e){if(K("Comparator.test",e,this.options.loose),this.semver===Ze||e===Ze)return!0;if(typeof e=="string")try{e=new te(e,this.options)}catch(t){return!1}return Ft(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof nt))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ve(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ve(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),i=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),a=this.semver.version===e.semver.version,s=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),m=Ft(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),f=Ft(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||a&&s||m||f}},{re:Jr,t:Qr}=ot,Ve=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ve)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ve(e.raw,t);if(e instanceof nt)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let r=t?ie[re.HYPHENRANGELOOSE]:ie[re.HYPHENRANGE];e=e.replace(r,Ro(this.options.includePrerelease)),K("hyphen replace",e),e=e.replace(ie[re.COMPARATORTRIM],uo),K("comparator trim",e,ie[re.COMPARATORTRIM]),e=(e=(e=e.replace(ie[re.TILDETRIM],fo)).replace(ie[re.CARETTRIM],ho)).split(/\s+/).join(" ");let i=t?ie[re.COMPARATORLOOSE]:ie[re.COMPARATOR];return e.split(" ").map(a=>mo(a,this.options)).join(" ").split(/\s+/).map(a=>wo(a,this.options)).filter(this.options.loose?a=>!!a.match(i):()=>!0).map(a=>new nt(a,this.options))}intersects(e,t){if(!(e instanceof Ve))throw new TypeError("a Range is required");return this.set.some(r=>Zr(r,t)&&e.set.some(i=>Zr(i,t)&&r.every(a=>i.every(s=>a.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new te(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(bo(this.set[t],e,this.options))return!0;return!1}},{re:ie,t:re,comparatorTrimReplace:uo,tildeTrimReplace:fo,caretTrimReplace:ho}=ot,Zr=(e,t)=>{let r=!0,i=e.slice(),a=i.pop();for(;r&&i.length;)r=i.every(s=>a.intersects(s,t)),a=i.pop();return r},mo=(e,t)=>(K("comp",e,t),e=yo(e,t),K("caret",e),e=vo(e,t),K("tildes",e),e=Eo(e,t),K("xrange",e),e=Io(e,t),K("stars",e),e),se=e=>!e||e.toLowerCase()==="x"||e==="*",vo=(e,t)=>e.trim().split(/\s+/).map(r=>po(r,t)).join(" "),po=(e,t)=>{let r=t.loose?ie[re.TILDELOOSE]:ie[re.TILDE];return e.replace(r,(i,a,s,m,f)=>{let p;return K("tilde",e,i,a,s,m,f),se(a)?p="":se(s)?p=`>=${a}.0.0 <${+a+1}.0.0-0`:se(m)?p=`>=${a}.${s}.0 <${a}.${+s+1}.0-0`:f?(K("replaceTilde pr",f),p=`>=${a}.${s}.${m}-${f} <${a}.${+s+1}.0-0`):p=`>=${a}.${s}.${m} <${a}.${+s+1}.0-0`,K("tilde return",p),p})},yo=(e,t)=>e.trim().split(/\s+/).map(r=>go(r,t)).join(" "),go=(e,t)=>{K("caret",e,t);let r=t.loose?ie[re.CARETLOOSE]:ie[re.CARET],i=t.includePrerelease?"-0":"";return e.replace(r,(a,s,m,f,p)=>{let y;return K("caret",e,a,s,m,f,p),se(s)?y="":se(m)?y=`>=${s}.0.0${i} <${+s+1}.0.0-0`:se(f)?y=s==="0"?`>=${s}.${m}.0${i} <${s}.${+m+1}.0-0`:`>=${s}.${m}.0${i} <${+s+1}.0.0-0`:p?(K("replaceCaret pr",p),y=s==="0"?m==="0"?`>=${s}.${m}.${f}-${p} <${s}.${m}.${+f+1}-0`:`>=${s}.${m}.${f}-${p} <${s}.${+m+1}.0-0`:`>=${s}.${m}.${f}-${p} <${+s+1}.0.0-0`):(K("no pr"),y=s==="0"?m==="0"?`>=${s}.${m}.${f}${i} <${s}.${m}.${+f+1}-0`:`>=${s}.${m}.${f}${i} <${s}.${+m+1}.0-0`:`>=${s}.${m}.${f} <${+s+1}.0.0-0`),K("caret return",y),y})},Eo=(e,t)=>(K("replaceXRanges",e,t),e.split(/\s+/).map(r=>_o(r,t)).join(" ")),_o=(e,t)=>{e=e.trim();let r=t.loose?ie[re.XRANGELOOSE]:ie[re.XRANGE];return e.replace(r,(i,a,s,m,f,p)=>{K("xRange",e,i,a,s,m,f,p);let y=se(s),g=y||se(m),N=g||se(f),_=N;return a==="="&&_&&(a=""),p=t.includePrerelease?"-0":"",y?i=a===">"||a==="<"?"<0.0.0-0":"*":a&&_?(g&&(m=0),f=0,a===">"?(a=">=",g?(s=+s+1,m=0,f=0):(m=+m+1,f=0)):a==="<="&&(a="<",g?s=+s+1:m=+m+1),a==="<"&&(p="-0"),i=`${a+s}.${m}.${f}${p}`):g?i=`>=${s}.0.0${p} <${+s+1}.0.0-0`:N&&(i=`>=${s}.${m}.0${p} <${s}.${+m+1}.0-0`),K("xRange return",i),i})},Io=(e,t)=>(K("replaceStars",e,t),e.trim().replace(ie[re.STAR],"")),wo=(e,t)=>(K("replaceGTE0",e,t),e.trim().replace(ie[t.includePrerelease?re.GTE0PRE:re.GTE0],"")),Ro=e=>(t,r,i,a,s,m,f,p,y,g,N,_,O)=>`${r=se(i)?"":se(a)?`>=${i}.0.0${e?"-0":""}`:se(s)?`>=${i}.${a}.0${e?"-0":""}`:m?`>=${r}`:`>=${r}${e?"-0":""}`} ${p=se(y)?"":se(g)?`<${+y+1}.0.0-0`:se(N)?`<${y}.${+g+1}.0-0`:_?`<=${y}.${g}.${N}-${_}`:e?`<${y}.${g}.${+N+1}-0`:`<=${p}`}`.trim(),bo=(e,t,r)=>{for(let i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let i=0;i<e.length;i++)if(K(e[i].semver),e[i].semver!==nt.ANY&&e[i].semver.prerelease.length>0){let a=e[i].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0},So=(e,t,r)=>{try{t=new Ve(t,r)}catch(i){return!1}return t.test(e)},{MAX_LENGTH:Ao}=Gt,{re:en,t:tn}=ot,Oo=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof te)return e;if(typeof e!="string"||e.length>Ao||!(t.loose?en[tn.LOOSE]:en[tn.FULL]).test(e))return null;try{return new te(e,t)}catch(r){return null}},No=Oo,{re:dt,t:ft}=ot,To=(e,t)=>{if(e instanceof te)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let i;for(;(i=dt[ft.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),dt[ft.COERCERTL].lastIndex=i.index+i[1].length+i[2].length;dt[ft.COERCERTL].lastIndex=-1}else r=e.match(dt[ft.COERCE]);return r===null?null:No(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function Mo(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Lo(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function Co(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,Mo))}function Po(e){return decodeURIComponent(Array.from(atob(e),Lo).join(""))}function cn(e){return Co(JSON.stringify(e))}function Do(e){return JSON.parse(Po(e))}function et(e){return typeof e=="undefined"}function $o(e){return e===null}function ln(e){return $o(e)||et(e)}function Uo(e){return ln(e)?!1:!et(e.jsonrpc)&&!et(e.id)&&(!et(e.result)||!et(e.error))}function xo(e){return ln(e)?!1:typeof e=="number"&&Object.values(Ge).includes(e)}function pt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var Y={};function un(e,t){return Object.assign(Y,t),e}var Fo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Se=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Se.prototype)}},je=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=xo(t)?t:Ge.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,je.prototype)}},Fe=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},wt=class extends Error{constructor(e,t,r,i){super(`Magic Extension Error (${e.name}): [${t}] ${r}`),this.code=t,this.rawMessage=r,this.data=i,this.__proto__=Error,Object.setPrototypeOf(this,wt.prototype)}},yt=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function ko(){return new Se(Ie.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Rt(){return new Se(Ie.ModalNotReady,"Modal is not ready.")}function Wo(){return new Se(Ie.MalformedResponse,"Response from the Magic iframe is malformed.")}function Go(e){return new Se(Ie.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Bo(e){let t=`Some extensions are incompatible with \`${Y.sdkName}@${Y.version}\`:`;return e.filter(r=>typeof r.compat!="undefined"&&r.compat!==null).forEach(r=>{let i=r.compat[Y.sdkName];typeof i=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${i}\``:i||(t+=`
  - Extension \`${r.name}\` does not support ${Y.platform} environments.`)}),new Se(Ie.IncompatibleExtensions,t)}function Vo(e){let t=r=>{let i=r+1,a=i%10,s=i%100;return a===1&&s!==11?`${i}st`:a===2&&s!==12?`${i}nd`:a===3&&s!==13?`${i}rd`:`${i}th`};return new Se(Ie.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function dn(){return new Fe(we.DuplicateIframe,"Duplicate iframes found.")}function jo(){return new Fe(we.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function qo(){return new Fe(we.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${Y.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function tt(e){let{method:t,removalVersions:r,useInstead:i}=e,a=r[Y.sdkName],s=i?` Use \`${i}\` instead.`:"",m=`\`${t}\` will be removed from \`${Y.sdkName}\` in version \`${a}\`.${s}`;return new Fe(we.DeprecationNotice,m)}function*Ho(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var Ko=Ho();function fn(){return Ko.next().value}var hn=Symbol("Payload pre-processed by Magic SDK");function mn(e){return Object.defineProperty(e,hn,{value:!0,enumerable:!1}),e}function Yo(e){return!!e[hn]}function gt(e){var t,r,i;return Yo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=fn(),e.method=(r=e.method)!=null?r:"noop",e.params=(i=e.params)!=null?i:[],mn(e)),e}function W(e,t=[]){return mn({params:t,method:e,jsonrpc:"2.0",id:fn()})}var Bt=class{constructor(e){e instanceof Bt?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Uo(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error!="undefined"&&this._error!==null}get hasResult(){return typeof this._result!="undefined"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Xo=Vi(ji()),zo=class extends Xo.default{};function vn(){let e=new zo;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...i)=>(e[t].apply(e,i),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var pn=Symbol("isPromiEvent");function Vt(e){return!!e[pn]}function _e(e){let t=yn(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:i}=vn(),a=Symbol("Promise.then"),s=Symbol("Promise.catch"),m=Symbol("Promise.finally"),f=(g,N)=>(..._)=>{let O=N[g].apply(N,_);return p(O)},p=g=>Object.assign(g,{[pn]:!0,[a]:g[a]||g.then,[s]:g[s]||g.catch,[m]:g[m]||g.finally,then:f(a,g),catch:f(s,g),finally:f(m,g),on:i("on",g),once:i("once",g),addListener:i("addListener",g),off:i("off",g),removeListener:i("removeListener",g),removeAllListeners:i("removeAllListeners",g),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),y=p(t.then(g=>(y.emit("done",g),y.emit("settled"),g),g=>{throw y.emit("error",g),y.emit("settled"),g}));return y.on(lt.ClosedByUser,()=>{y.emit(ct.ClosedByUser)}),y}function yn(e){return new Promise((t,r)=>{let i=e(t,r);Promise.resolve(i).catch(r)})}var Me=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){if(this.sdk.thirdPartyWallets.isConnected&&!xt.includes(e.method))return _e((a,s)=>{this.sdk.thirdPartyWallets.requestOverride(e).then(a).catch(s)});let t=this.overlay.post(Re.MAGIC_HANDLE_REQUEST,gt(e)),r=_e((a,s)=>{t.then(m=>{if(i(),m.hasError)s(new je(m.payload.error));else if(m.hasResult)a(m.payload.result);else throw Wo()}).catch(m=>{i(),s(m)})}),i=this.overlay.on(he.MAGIC_HANDLE_EVENT,a=>{var s;let{response:m}=a.data;if(m.id===e.id&&((s=m.result)==null?void 0:s.event)){let{event:f,params:p=[]}=m.result;r.emit(f,...p)}});return r}createIntermediaryEvent(e,t){return r=>{let i=W(M.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(i)}}};function Jo(e,t){let[r]=e.split(".").map(Number);return r>=t}var rt={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},Qo=class extends Me{loginWithMagicLink(e){let t=Y.sdkName==="@magic-sdk/react-native"||Y.sdkName==="@magic-sdk/react-native-bare"||Y.sdkName==="@magic-sdk/react-native-expo";if(t&&Jo(Y.version,19))throw new Error("loginWithMagicLink() is deprecated for this package, please utlize a passcode method like loginWithSMS or loginWithEmailOTP instead.");t&&tt({method:"auth.loginWithMagicLink()",removalVersions:rt,useInstead:"auth.loginWithEmailOTP()"}).log();let{email:r,showUI:i=!0,redirectURI:a,overrides:s,lifespan:m}=e,f=W(this.sdk.testMode?M.LoginWithMagicLinkTestMode:M.LoginWithMagicLink,[{email:r,showUI:i,redirectURI:a,overrides:s,lifespan:m}]);return this.request(f)}loginWithSMS(e){let{phoneNumber:t,showUI:r=!0,lifespan:i}=e,a=W(this.sdk.testMode?M.LoginWithSmsTestMode:M.LoginWithSms,[{phoneNumber:t,showUI:r,lifespan:i}]),s=this.request(a);return!r&&s&&(s.on(De.VerifySmsOtp,m=>{this.createIntermediaryEvent(De.VerifySmsOtp,a.id)(m)}),s.on(De.Cancel,()=>{this.createIntermediaryEvent(De.Cancel,a.id)()})),s}loginWithEmailOTP(e){let{email:t,showUI:r,deviceCheckUI:i,overrides:a,lifespan:s}=e,m=W(this.sdk.testMode?M.LoginWithEmailOTPTestMode:M.LoginWithEmailOTP,[{email:t,showUI:r,deviceCheckUI:i,overrides:a,lifespan:s}]),f=this.request(m);return!i&&f&&f.on(Je.Retry,()=>{this.createIntermediaryEvent(Je.Retry,m.id)()}),!r&&f&&(f.on(de.VerifyEmailOtp,p=>{this.createIntermediaryEvent(de.VerifyEmailOtp,m.id)(p)}),f.on(de.VerifyMFACode,p=>{this.createIntermediaryEvent(de.VerifyMFACode,m.id)(p)}),f.on(de.LostDevice,()=>{this.createIntermediaryEvent(de.LostDevice,m.id)()}),f.on(de.VerifyRecoveryCode,p=>{this.createIntermediaryEvent(de.VerifyRecoveryCode,m.id)(p)}),f.on(de.Cancel,()=>{this.createIntermediaryEvent(de.Cancel,m.id)()})),f}loginWithCredential(e){let{credentialOrQueryString:t,lifespan:r}=e||{},i=t!=null?t:"";if(!t&&Y.platform==="web"){i=window.location.search;let s=window.location.origin+window.location.pathname;window.history.replaceState(null,"",s)}let a=W(this.sdk.testMode?M.LoginWithCredentialTestMode:M.LoginWithCredential,[i,r]);return this.request(a)}setAuthorizationToken(e){let t=W(M.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){let{email:t,showUI:r=!0}=e,i=W(this.sdk.testMode?M.UpdateEmailTestMode:M.UpdateEmail,[{email:t,showUI:r}]),a=this.request(i);return r||(a.on(ue.Retry,()=>{this.createIntermediaryEvent(ue.Retry,i.id)()}),a.on(ue.Cancel,()=>{this.createIntermediaryEvent(ue.Cancel,i.id)()}),a.on(ue.VerifyEmailOtp,s=>{this.createIntermediaryEvent(ue.VerifyEmailOtp,i.id)(s)}),a.on(ue.VerifyMFACode,s=>{this.createIntermediaryEvent(ue.VerifyMFACode,i.id)(s)}),a.on(ne.RetryWithNewEmail,s=>{this.createIntermediaryEvent(ne.RetryWithNewEmail,i.id)(s)}),a.on(ne.Cancel,()=>{this.createIntermediaryEvent(ne.Cancel,i.id)()}),a.on(ne.VerifyEmailOtp,s=>{this.createIntermediaryEvent(ne.VerifyEmailOtp,i.id)(s)})),a}},gn={};Gi(gn,{clear:()=>Zo,getItem:()=>me,iterate:()=>En,key:()=>ta,keys:()=>ra,length:()=>ea,removeItem:()=>Et,setItem:()=>Te});var ht;function Le(e){return(...t)=>Z(this,null,function*(){return ht||(ht=yield Y.configureStorage()),yield ht.ready(),ht[e](...t)})}var me=Le("getItem"),Te=Le("setItem"),Et=Le("removeItem"),Zo=Le("clear"),ea=Le("length"),ta=Le("key"),ra=Le("keys"),En=Le("iterate");function na(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var _n="STORE_KEY_PRIVATE_KEY",kt="STORE_KEY_PUBLIC_JWK",In="ECDSA",ia="P-256",oa={name:In,namedCurve:ia};function bt(){let e=typeof window!="undefined"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function aa(){return Z(this,null,function*(){let e=yield sa();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield me(_n);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let i={iat:Math.floor(new Date().getTime()/1e3),jti:na()},a={typ:"dpop+jwt",alg:"ES256",jwk:e},s={protected:rn(JSON.stringify(a)),claims:rn(JSON.stringify(i))},m=la(`${s.protected}.${s.claims}`),f={name:In,hash:{name:"SHA-256"}},p=da(new Uint8Array(yield t.sign(f,r,m)));return`${s.protected}.${s.claims}.${p}`})}function sa(){return Z(this,null,function*(){if(!bt()){console.info("webcrypto is not supported");return}return(yield me(kt))||(yield ca()),me(kt)})}function ca(){return Z(this,null,function*(){let{subtle:e}=window.crypto,t=yield e.generateKey(oa,!1,["sign"]),r=yield e.exportKey("jwk",t.publicKey);yield Te(_n,t.privateKey),yield Te(kt,r)})}function rn(e){return wn(ua(e))}function la(e){return new TextEncoder().encode(e)}function wn(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function ua(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function da(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),wn(t)}var jt="ds",qt="ek",Ht="iv",Kt="AES-GCM",fa=256;function Yt(){return Z(this,null,function*(){let e=[];yield En((t,r,i)=>{r.startsWith(`${jt}_`)&&e.push(r)});for(let t of e)yield Et(t)})}function Rn(e){let t="",r=new Uint8Array(e),i=r.byteLength;for(let a=0;a<i;a++)t+=String.fromCharCode(r[a]);return window.btoa(t)}function bn(e){let t=window.atob(e),r=t.length,i=new Uint8Array(r);for(let a=0;a<r;a++)i[a]=t.charCodeAt(a);return i.buffer}function ha(){return Z(this,null,function*(){if(!bt()){console.info("webcrypto is not supported");return}let{crypto:e}=window;return(yield me(Ht))||e.getRandomValues(new Uint8Array(12))})}function ma(){return Z(this,null,function*(){if(!bt()){console.info("webcrypto is not supported");return}let{subtle:e}=window.crypto;return(yield me(qt))||(yield e.generateKey({name:Kt,length:fa},!1,["encrypt","decrypt"]))})}function va(e,t){return Z(this,null,function*(){let r=yield ha(),i=yield ma();if(!r||!i||!e)return;let a=bn(e),{subtle:s}=window.crypto,m=yield s.encrypt({name:Kt,iv:r},i,a),f=Rn(m);yield Te(`${jt}_${t}`,f),yield Te(qt,i),yield Te(Ht,r)})}function pa(e){return Z(this,null,function*(){let t=yield me(`${jt}_${e}`),r=yield me(Ht),i=yield me(qt);if(!r||!t||!i||!bt())return;let{subtle:a}=window.crypto,s=yield a.decrypt({name:Kt,iv:r},i,bn(t));return Rn(s)})}function it(e,t){return t?new URL(e,t):new URL(e)}var ya=class extends Me{constructor(){super(...arguments),this.localForageIsLoggedInKey="magic_auth_is_logged_in",this.userLoggedOutCallbacks=[]}getIdToken(e){let t=W(this.sdk.testMode?M.GetIdTokenTestMode:M.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=W(this.sdk.testMode?M.GenerateIdTokenTestMode:M.GenerateIdToken,[e]);return this.request(t)}getInfo(){let e=W(M.GetInfo,[]);return this.request(e)}isLoggedIn(){return _e((e,t)=>Z(this,null,function*(){try{let r=!1;this.sdk.useStorageCache&&(r=(yield me(this.localForageIsLoggedInKey))==="true",r&&e(!0));let i=W(this.sdk.testMode?M.IsLoggedInTestMode:M.IsLoggedIn),a=yield this.request(i);this.sdk.useStorageCache&&(a?Te(this.localForageIsLoggedInKey,!0):Et(this.localForageIsLoggedInKey),r&&!a&&this.emitUserLoggedOut(!0)),e(a)}catch(r){t(r)}}))}logout(){return Et(this.localForageIsLoggedInKey),Yt(),_e((e,t)=>Z(this,null,function*(){try{let r=W(this.sdk.testMode?M.LogoutTestMode:M.Logout),i=yield this.request(r);this.sdk.useStorageCache&&this.emitUserLoggedOut(i),e(i)}catch(r){t(r)}}))}requestInfoWithUI(e){let t=W(M.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let{showUI:t=!0}=e||{},r=W(this.sdk.testMode?M.UserSettingsTestMode:M.UserSettings,[e]),i=this.request(r);return!t&&i&&(i.on(pe.SendNewPhoneNumber,a=>{this.createIntermediaryEvent(pe.SendNewPhoneNumber,r.id)(a)}),i.on(pe.SendOtpCode,a=>{this.createIntermediaryEvent(pe.SendOtpCode,r.id)(a)}),i.on(pe.StartEditPhoneNumber,()=>{this.createIntermediaryEvent(pe.StartEditPhoneNumber,r.id)()}),i.on(pe.Cancel,()=>{this.createIntermediaryEvent(pe.Cancel,r.id)()}),i.on(ue.VerifyEmailOtp,a=>{this.createIntermediaryEvent(ue.VerifyEmailOtp,r.id)(a)})),i}recoverAccount(e){let{email:t,showUI:r}=e,i=W(this.sdk.testMode?M.RecoverAccountTestMode:M.RecoverAccount,[{email:t,showUI:r}]),a=this.request(i);return!r&&a&&(a.on(ye.Cancel,()=>{this.createIntermediaryEvent(ye.Cancel,i.id)()}),a.on(ye.ResendSms,()=>{this.createIntermediaryEvent(ye.ResendSms,i.id)()}),a.on(ye.VerifyOtp,s=>{this.createIntermediaryEvent(ye.VerifyOtp,i.id)(s)}),a.on(ye.UpdateEmail,s=>{this.createIntermediaryEvent(ye.UpdateEmail,i.id)(s)}),a.on(ne.Cancel,()=>{this.createIntermediaryEvent(ne.Cancel,i.id)()}),a.on(ne.RetryWithNewEmail,s=>{this.createIntermediaryEvent(ne.RetryWithNewEmail,i.id)(s)}),a.on(ne.VerifyEmailOtp,s=>{this.createIntermediaryEvent(ne.VerifyEmailOtp,i.id)(s)})),a}revealPrivateKey(){let e=W(M.RevealPK);return this.request(e)}getMetadata(){tt({method:"user.getMetadata()",removalVersions:rt,useInstead:"user.getInfo()"}).log();let e=W(this.sdk.testMode?M.GetMetadataTestMode:M.GetMetadata);return this.request(e)}onUserLoggedOut(e){this.userLoggedOutCallbacks.push(e)}enableMFA(e){let{showUI:t=!0}=e,r=W(M.EnableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on($e.VerifyMFACode,a=>{this.createIntermediaryEvent($e.VerifyMFACode,r.id)(a)}),i.on($e.Cancel,()=>{this.createIntermediaryEvent($e.Cancel,r.id)()})),i}disableMFA(e){let{showUI:t=!0}=e,r=W(M.DisableMFA,[{showUI:t}]),i=this.request(r);return!t&&i&&(i.on(be.VerifyMFACode,a=>{this.createIntermediaryEvent(be.VerifyMFACode,r.id)(a)}),i.on(be.LostDevice,a=>{this.createIntermediaryEvent(be.LostDevice,r.id)(a)}),i.on(be.Cancel,()=>{this.createIntermediaryEvent(be.Cancel,r.id)()})),i}emitUserLoggedOut(e){this.userLoggedOutCallbacks.forEach(t=>{t(e)})}},ga=class extends Me{connectWithUI(e){let t=_e((r,i)=>Z(this,null,function*(){try{let a=W(M.Login,[It({enabledWallets:this.sdk.thirdPartyWallets.enabledWallets},e)]),s=this.request(a);this.sdk.thirdPartyWallets.eventListeners.forEach(({event:f,callback:p})=>{s.on(f,()=>p(a.id))}),s.on("id-token-created",f=>{t.emit("id-token-created",f)});let m=yield s;m.error&&i(m),r(m)}catch(a){i(a)}}));return t}showUI(e){return this.request(W(M.ShowUI,[e]))}showAddress(){return this.request(W(M.ShowAddress))}showSendTokensUI(){return this.request(W(M.ShowSendTokensUI))}showOnRamp(){return this.request(W(M.ShowOnRamp))}showNFTs(){return this.request(W(M.ShowNFTs))}showBalances(){return this.request(W(M.ShowBalances))}sendGaslessTransaction(e,t){return this.request(W(M.SendGaslessTransaction,[e,t]))}getInfo(){tt({method:"wallet.getInfo()",removalVersions:rt,useInstead:"user.getInfo()"}).log();let e=W(M.GetInfo,[]);return this.request(e)}disconnect(){tt({method:"wallet.disconnect()",removalVersions:rt,useInstead:"user.logout()"}).log(),Yt();let e=W(M.Disconnect);return this.request(e)}requestUserInfoWithUI(e){tt({method:"wallet.requestUserInfoWithUI()",removalVersions:rt,useInstead:"user.requestUserInfoWithUI()"}).log();let t=W(M.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}},Ea=class extends Me{constructor(){super(...arguments),this.eventListeners=[],this.enabledWallets={},this.isConnected=!1}resetThirdPartyWalletState(){localStorage.removeItem(Ee.PROVIDER),localStorage.removeItem(Ee.ADDRESS),localStorage.removeItem(Ee.CHAIN_ID),this.isConnected=!1}requestOverride(e){if(e.method===M.Login)return this.resetThirdPartyWalletState(),super.request(e);if(e.method===M.GetInfo)return this.getInfo(e);if(e.method===M.IsLoggedIn)return this.isLoggedIn(e);if(e.method===M.Logout)return this.logout(e);switch(localStorage.getItem(Ee.PROVIDER)){case"web3modal":return this.web3modalRequest(e);default:return this.resetThirdPartyWalletState(),super.request(e)}}isLoggedIn(e){switch(localStorage.getItem(Ee.PROVIDER)){case"web3modal":return this.web3modalIsLoggedIn();default:return this.resetThirdPartyWalletState(),super.request(e)}}getInfo(e){switch(localStorage.getItem(Ee.PROVIDER)){case"web3modal":return this.web3modalGetInfo();default:return this.resetThirdPartyWalletState(),super.request(e)}}logout(e){let t=localStorage.getItem(Ee.PROVIDER);switch(this.resetThirdPartyWalletState(),t){case"web3modal":return this.web3modalLogout();default:return super.request(e)}}web3modalRequest(e){return _e((t,r)=>{this.sdk.web3modal.modal.getWalletProvider().request(e).then(t).catch(r)})}web3modalIsLoggedIn(){return _e(e=>{let t=this.sdk.web3modal.modal.getStatus();if(t==="connected"&&e(!0),t==="disconnected"&&(this.resetThirdPartyWalletState(),e(!1)),t==="reconnecting"){let r=this.sdk.web3modal.modal.subscribeProvider(({status:i})=>{i==="connected"&&(r(),e(!0)),i==="disconnected"&&(r(),this.resetThirdPartyWalletState(),e(!1))})}})}formatWeb3modalGetInfoResponse(){var e;let t=(e=this.sdk.web3modal.modal.getWalletInfo())==null?void 0:e.name,r=this.sdk.web3modal.modal.getAddress();return{publicAddress:r,email:null,issuer:`did:ethr:${r}`,phoneNumber:null,isMfaEnabled:!1,recoveryFactors:[],walletType:t||"web3modal"}}web3modalGetInfo(){return _e((e,t)=>{let r=this.sdk.web3modal.modal.getStatus();if(r==="connected"&&e(this.formatWeb3modalGetInfoResponse()),r==="disconnected"&&(this.resetThirdPartyWalletState(),t("Magic RPC Error: [-32603] Internal error: User denied account access.")),r==="reconnecting"){let i=this.sdk.web3modal.modal.subscribeProvider(({status:a})=>{a==="connected"&&(i(),e(this.formatWeb3modalGetInfoResponse())),a==="disconnected"&&(i(),this.resetThirdPartyWalletState(),t("Magic RPC Error: [-32603] Internal error: User denied account access."))})}})}web3modalLogout(){return _e(e=>Z(this,null,function*(){try{yield this.sdk.web3modal.modal.disconnect()}catch(t){console.error(t)}e(!0)}))}},{createBoundEmitterMethod:mt,createChainingEmitterMethod:Be}=vn(),_a=class extends Me{constructor(){super(...arguments),this.isMagic=!0,this.on=Be("on",this),this.once=Be("once",this),this.addListener=Be("addListener",this),this.off=Be("off",this),this.removeListener=Be("removeListener",this),this.removeAllListeners=Be("removeAllListeners",this),this.emit=mt("emit"),this.eventNames=mt("eventNames"),this.listeners=mt("listeners"),this.listenerCount=mt("listenerCount")}sendAsync(e,t){if(!t)throw Vo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Re.MAGIC_HANDLE_REQUEST,e.map(r=>{let i=gt(r);return this.prefixPayloadMethodForTestMode(i),i})).then(r=>{t(null,r.map(i=>Wt(It({},i.payload),{error:i.hasError?new je(i.payload.error):null})))});else{let r=gt(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(Re.MAGIC_HANDLE_REQUEST,r).then(i=>{t(i.hasError?new je(i.payload.error):null,i.payload)})}}send(e,t){if(typeof e=="string"){let i=W(e,Array.isArray(t)?t:[]);return this.request(i)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let r=jo();return r.log(),new Bt(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=W(M.Login);return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}},nn=["request","overlay","sdk"];function Ia(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Me.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Sn=class extends Me{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:_e,isPromiEvent:Vt,encodeJSON:cn,decodeJSON:Do,createJsonRpcRequestPayload:W,standardizeJsonRpcRequestPayload:gt,storage:gn};let e=[this,...Ia(this)];nn.forEach(t=>{let r=e.map(m=>Object.getOwnPropertyDescriptor(m,t)),i=r.findIndex(m=>!!m),a=i>0,s=r[i];s&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:s,isPrototypeField:a}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Go(t)}}))})}init(e){this.__is_initialized__||(nn.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:r,isPrototypeField:i}=this.__sdk_access_field_descriptors__.get(t);i?delete this[t]:Object.defineProperty(this,t,r)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:r,useInstead:i}=e,a=i?` Use \`${i}\` instead.`:"",s=`\`${t}\` will be removed from this Extension in version \`${r}\`.${a}`;return new yt(this,"DEPRECATION_NOTICE",s)}createWarning(e,t){return new yt(this,e,t)}createError(e,t,r){return new wt(this,e,t,r)}},wa=class extends Sn{},xe=class extends Sn{};xe.Internal=wa,xe.Anonymous="anonymous extension";var Ra=class extends Me{purchase(e){let t=W(M.NFTPurchase,[e]);return this.request(t)}checkout(e){let t=this.sdk.thirdPartyWallets.isConnected,r=W(M.NFTCheckout,[Wt(It({},e),{walletProvider:t?"web3modal":"magic"})]),i=this.request(r);return t&&(i.on(Ue.Initiated,a=>Z(this,null,function*(){try{let s=yield this.request({method:"eth_sendTransaction",params:[a]});this.createIntermediaryEvent(Ue.Success,r.id)(s)}catch(s){this.createIntermediaryEvent(Ue.Failure,r.id)()}})),i.on(Ue.Disconnect,()=>{this.sdk.thirdPartyWallets.resetThirdPartyWalletState(),i.emit("disconnect")})),i}transfer(e){let t=W(M.NFTTransfer,[e]);return this.request(t)}};function on(e){return e.compat&&e.compat[Y.sdkName]!=null?typeof e.compat[Y.sdkName]=="string"?So(To(Y.version),e.compat[Y.sdkName]):!!e.compat[Y.sdkName]:!0}function ba(e,t,r){return!t&&!r?`${e}_eth_mainnet`:r?`${e}_${JSON.stringify(r)}`:t?typeof t=="string"?`${e}_eth_${t}`:`${e}_${t.rpcUrl}_${t.chainId}_${t.chainType}`:`${e}_unknown`}function Sa(e){var t;let r=(t=e==null?void 0:e.extensions)!=null?t:[],i={},a=[];if(Array.isArray(r)?r.forEach(s=>{on(s)?(s.init(this),(s.name||s.name!==xe.Anonymous)&&(this[s.name]=s),s instanceof xe.Internal&&(pt(s.config)||(i[s.name]=s.config))):a.push(s)}):Object.keys(r).forEach(s=>{if(on(r[s])){r[s].init(this);let m=r[s];this[s]=m,m instanceof xe.Internal&&(pt(m.config)||(i[r[s].name]=m.config))}else a.push(r[s])}),a.length)throw Bo(a);return i}var vt=class{constructor(e,t){this.apiKey=e;var r;if(!e)throw ko();Y.platform==="react-native"&&(t==null?void 0:t.endpoint)&&qo().log();let{defaultEndpoint:i,version:a}=Y;this.testMode=!!(t!=null&&t.testMode),this.useStorageCache=!!(t!=null&&t.useStorageCache),this.endpoint=it((r=t==null?void 0:t.endpoint)!=null?r:i).origin,this.auth=new Qo(this),this.user=new ya(this),this.wallet=new ga(this),this.nft=new Ra(this),this.thirdPartyWallets=new Ea(this),this.rpcProvider=new _a(this);let s=Sa.call(this,t);this.parameters=cn(Wt(It({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:it(this.endpoint).host,sdk:Fo[Y.sdkName],version:a,ext:pt(s)?void 0:s,locale:(t==null?void 0:t.locale)||"en_US"},Y.bundleId?{bundleId:Y.bundleId}:{}),{meta:t==null?void 0:t.meta})),this.networkHash=ba(this.apiKey,t==null?void 0:t.network,pt(s)?void 0:s),t!=null&&t.deferPreload||this.preload()}get overlay(){if(!vt.__overlays__.has(this.parameters)){let e=new Y.ViewController(this.endpoint,this.parameters,this.networkHash);e.init(),vt.__overlays__.set(this.parameters,e)}return vt.__overlays__.get(this.parameters)}preload(){return Z(this,null,function*(){yield this.overlay.checkIsReadyForRequest})}},Xt=vt;Xt.__overlays__=new Map;function Aa(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function Oa(e,t){var r;let i=(r=t.data.response)==null?void 0:r.id,a=Aa(e,i);if(i&&a){let s=new Bt(a).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:i,response:s}}return{}}function Na(e,t,r){return Z(this,null,function*(){var i;let a=yield me("rt"),s;if(Y.platform==="web")try{s=(i=yield me("jwt"))!=null?i:yield aa()}catch(p){console.error("webcrypto error",p)}let m={msgType:e,payload:t};s&&(m.jwt=s),s&&a&&(m.rt=a);let f=yield pa(r);return f&&(m.deviceShare=f),m})}function Ta(e){return Z(this,null,function*(){!e.data.rt||(yield Te("rt",e.data.rt))})}var An=class{constructor(e,t,r){this.endpoint=e,this.parameters=t,this.networkHash=r,this.messageHandlers=new Set,this.isConnectedToInternet=!0,this.checkIsReadyForRequest=this.waitForReady(),this.isReadyForRequest=!1,this.listen()}post(e,t){return Z(this,null,function*(){return yn((r,i)=>Z(this,null,function*(){if(!this.isConnectedToInternet){let y=Rt();i(y)}this.isReadyForRequest||(yield this.waitForReady());let a=[],s=Array.isArray(t)?t.map(y=>y.id):[],m=yield Na(`${e}-${this.parameters}`,t,this.networkHash);yield this._post(m);let f=y=>g=>{var N;let{id:_,response:O}=Oa(t,g);if(Ta(g),((N=O==null?void 0:O.payload.error)==null?void 0:N.message)==="User denied account access.")Yt();else if(g.data.deviceShare){let{deviceShare:L}=g.data;va(L,this.networkHash)}_&&O&&Array.isArray(t)&&s.includes(_)?(a.push(O),a.length===t.length&&(y(),r(a))):_&&O&&!Array.isArray(t)&&_===t.id&&(y(),r(O))},p=this.on(he.MAGIC_HANDLE_RESPONSE,f(()=>p()))}))})}on(e,t){let r=t.bind(window),i=a=>{a.data.msgType===`${e}-${this.parameters}`&&r(a)};return this.messageHandlers.add(i),()=>this.messageHandlers.delete(i)}waitForReady(){return new Promise(e=>{let t=this.on(he.MAGIC_OVERLAY_READY,()=>{this.isReadyForRequest=!0,e(),t()});setTimeout(()=>{this.isReadyForRequest=!0,e(),t()},15e3)})}listen(){this.on(he.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(he.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()}),this.on(he.MAGIC_SEND_PRODUCT_ANNOUNCEMENT,e=>{e.data.response.result.product_announcement&&new Fe(we.ProductAnnouncement,e.data.response.result.product_announcement).log()})}};var zt={};Rr(zt,{AuthEventOnReceived:()=>$r,DeepLinkPage:()=>Or,DeviceVerificationEventEmit:()=>Je,DeviceVerificationEventOnReceived:()=>Cr,DisableMFAEventEmit:()=>be,DisableMFAEventOnReceived:()=>Fr,EnableMFAEventEmit:()=>$e,EnableMFAEventOnReceived:()=>xr,EthChainType:()=>kr,Extension:()=>xe,ExtensionError:()=>wt,ExtensionWarning:()=>yt,FarcasterLoginEventEmit:()=>Ur,LocalStorageKeys:()=>Ee,LoginWithEmailOTPEventEmit:()=>de,LoginWithEmailOTPEventOnReceived:()=>Lr,LoginWithMagicLinkEventEmit:()=>Nr,LoginWithMagicLinkEventOnReceived:()=>Tr,LoginWithSmsOTPEventEmit:()=>De,LoginWithSmsOTPEventOnReceived:()=>Mr,MagicIncomingWindowMessage:()=>he,MagicOutgoingWindowMessage:()=>Re,MagicPayloadMethod:()=>M,NftCheckoutIntermediaryEvents:()=>Ue,RPCError:()=>je,RPCErrorCode:()=>Ge,RecencyCheckEventEmit:()=>ue,RecencyCheckEventOnReceived:()=>Pr,RecoverAccountEventEmit:()=>ye,RecoverAccountEventOnReceived:()=>Br,RecoveryFactorEventEmit:()=>pe,RecoveryFactorEventOnReceived:()=>Wr,RecoveryMethodType:()=>Gr,SDKError:()=>Se,SDKErrorCode:()=>Ie,SDKWarning:()=>Fe,SDKWarningCode:()=>we,ThirdPartyWalletEvents:()=>Ar,UiEventsEmit:()=>jr,UpdateEmailEventEmit:()=>ne,UpdateEmailEventOnReceived:()=>Dr,UserEventsEmit:()=>ct,UserEventsOnReceived:()=>lt,WalletEventOnReceived:()=>Vr,isPromiEvent:()=>Vt,routeToMagicMethods:()=>xt});var Ot=Sr(Nn()),Qt=Sr(Mn());var Ma={display:"block",visibility:"hidden",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",opacity:"0",zIndex:"-1"};function La(e){for(let[t,r]of Object.entries(Ma))e.style[t]=r}function Ca(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(r=>r.src.includes(e)))}var Ln=1e3,Cn=60*Ln,Pa=15*Ln,Da=2*Cn,$a=60*Cn,At=class extends An{constructor(){super(...arguments);this.activeElement=null;this.lastPingTime=Date.now();this.intervalTimer=null;this.timeoutTimer=null}getIframeSrc(){return it(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href}init(){this.test="hello",this.iframe=new Promise(r=>{let i=()=>{if(Ca(encodeURIComponent(this.parameters)))dn().log();else{let a=document.createElement("iframe");a.classList.add("magic-iframe"),a.dataset.magicIframeLabel=it(this.endpoint).host,a.title="Secure Modal",a.src=this.getIframeSrc(),a.allow="clipboard-read; clipboard-write",La(a),document.body.appendChild(a),r(a)}};["loaded","interactive","complete"].includes(document.readyState)?i():window.addEventListener("load",i,!1)}),this.iframe.then(r=>{r instanceof HTMLIFrameElement&&r.addEventListener("load",()=>ge(this,null,function*(){yield this.startHeartBeat()}))}),window.addEventListener("message",r=>{var i;if(r.origin===this.endpoint&&r.data&&r.data.msgType&&this.messageHandlers.size){r.data.msgType.includes(he.MAGIC_PONG)&&(this.lastPingTime=Date.now()),r.data.response=(i=r.data.response)!=null?i:{};for(let s of this.messageHandlers.values())s(r)}}),window.addEventListener("beforeunload",()=>{this.stopHeartBeat()})}showOverlay(){return ge(this,null,function*(){let r=yield this.iframe;r.style.visibility="visible",r.style.zIndex="2147483647",r.style.opacity="1",this.activeElement=document.activeElement,r.focus()})}hideOverlay(){return ge(this,null,function*(){var i;let r=yield this.iframe;r.style.visibility="hidden",r.style.zIndex="-1",r.style.opacity="0",(i=this.activeElement)!=null&&i.focus&&this.activeElement.focus(),this.activeElement=null})}_post(r){return ge(this,null,function*(){let i=yield this.iframe;if(i&&i.contentWindow)i.contentWindow.postMessage(r,this.endpoint);else throw Rt()})}heartBeatCheck(){this.intervalTimer=setInterval(()=>ge(this,null,function*(){let r={msgType:`${Re.MAGIC_PING}-${this.parameters}`,payload:[]};yield this._post(r),Date.now()-this.lastPingTime>Pa&&(yield this.reloadIframe(),this.lastPingTime=Date.now())}),Da)}startHeartBeat(){return ge(this,null,function*(){(yield this.iframe)&&(this.timeoutTimer=setTimeout(()=>this.heartBeatCheck(),$a))})}stopHeartBeat(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.intervalTimer&&(clearInterval(this.intervalTimer),this.intervalTimer=null)}reloadIframe(){return ge(this,null,function*(){let r=yield this.iframe;if(r)r.src=this.getIframeSrc();else throw Rt()})}};var Ua=Object.assign(un(Xt,{platform:"web",sdkName:"magic-sdk",version:"28.21.1",defaultEndpoint:"https://auth.magic.link/",ViewController:At,configureStorage:()=>ge(void 0,null,function*(){let e=Ot.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Qt),yield e.setDriver([Ot.default.INDEXEDDB,Ot.default.LOCALSTORAGE,Qt._driver]),e})}),Ir({},zt)),xa=Ua;return Ci(Fa);})();
if (Magic && Magic.default != null) { Magic = Object.assign(Magic.default, Magic); delete Magic.default; }
