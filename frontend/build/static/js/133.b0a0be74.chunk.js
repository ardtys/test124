"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[133],{133:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(43),s=a(816),o=a(579);const i=()=>{const[e,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{try{const e=await s.A.getProfile();t(e),i(!1)}catch(e){c("Failed to fetch profile"),i(!1)}})()}),[]),a?(0,o.jsx)("div",{children:"Loading profile..."}):l?(0,o.jsx)("div",{children:l}):(0,o.jsxs)("div",{className:"container mx-auto p-4",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"User Profile"}),e&&(0,o.jsxs)("div",{className:"bg-white shadow-md rounded p-6",children:[(0,o.jsxs)("p",{children:["Username: ",e.username]}),(0,o.jsxs)("p",{children:["Email: ",e.email]}),(0,o.jsxs)("p",{children:["Role: ",e.role]})]})]})}},816:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(722),s=a(590);const o=new class{constructor(){this.magic=new s.qM("pk_live_76B8059F716253F6"),this.api=r.A.create({baseURL:"http://localhost:3000/api"})}async login(e){try{await this.magic.auth.loginWithMagicLink({email:e});const t=await this.magic.user.getMetadata(),a=await this.api.post("/auth/magic-link",{email:t.email});return localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),a.data}catch(t){throw console.error("Login error",t),t}}async register(e){try{const t=await this.api.post("/auth/register",e);return localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),t.data}catch(t){throw console.error("Registration error",t),t}}async logout(){try{await this.magic.user.logout(),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){console.error("Logout error",e)}}isAuthenticated(){return!!localStorage.getItem("token")}getCurrentUser(){return JSON.parse(localStorage.getItem("user"))}async getProfile(){try{return(await this.api.get("/auth/profile")).data.user}catch(e){throw console.error("Profile fetch error",e),e}}}}}]);
//# sourceMappingURL=133.b0a0be74.chunk.js.map