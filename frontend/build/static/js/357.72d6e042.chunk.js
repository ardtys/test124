"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[357],{357:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(379),s=r(43),o=r(837),n=r(749),c=r(579);const l=()=>{const[e,t]=(0,s.useState)("Transferable"),[r,l]=(0,s.useState)({title:"",description:"",documentNumber:""}),[d,i]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),h=(0,o.Zp)(),p=e=>{const{name:t,value:r}=e.target;l((e=>(0,a.A)((0,a.A)({},e),{},{[t]:r})))};return(0,c.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,c.jsxs)("div",{className:"max-w-2xl mx-auto bg-white shadow-md rounded-lg p-8",children:[(0,c.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Document"}),u&&(0,c.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:u}),(0,c.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0),m(null);try{const t=await n.A.createDocument({documentType:e,metadata:r});h("/documents/".concat(t.id))}catch(a){m(a.message||"Failed to create document"),i(!1)}},children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Document Type"}),(0,c.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border rounded",children:[(0,c.jsx)("option",{value:"Transferable",children:"Transferable"}),(0,c.jsx)("option",{value:"Verifiable",children:"Verifiable"})]})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Title"}),(0,c.jsx)("input",{type:"text",name:"title",value:r.title,onChange:p,className:"w-full px-3 py-2 border rounded",placeholder:"Enter document title",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Description"}),(0,c.jsx)("textarea",{name:"description",value:r.description,onChange:p,className:"w-full px-3 py-2 border rounded",placeholder:"Enter document description",rows:"4"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Document Number"}),(0,c.jsx)("input",{type:"text",name:"documentNumber",value:r.documentNumber,onChange:p,className:"w-full px-3 py-2 border rounded",placeholder:"Enter document number",required:!0})]}),(0,c.jsx)("div",{className:"flex items-center justify-between",children:(0,c.jsx)("button",{type:"submit",disabled:d,className:"\n                                w-full py-2 px-4 rounded \n                                ".concat(d?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-700 text-white","\n                            "),children:d?"Creating...":"Create Document"})})]})]})})}},749:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(722);const s=new class{constructor(){this.api=a.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:3000/api",REACT_APP_BLOCKCHAIN_NETWORK:"xdc_testnet",REACT_APP_BLOCKCHAIN_PROVIDER:"https://rpc.apothem.network",REACT_APP_DOCUMENT_MANAGEMENT_CONTRACT_ADDRESS:"0x74612C664b12416adAcE50Be0E1b1ad6994ce23D",REACT_APP_DOCUMENT_REGISTRY_CONTRACT_ADDRESS:"0xEFc265999C254438e3D595c004e9Fbec3d6cD39a",REACT_APP_MAGIC_PUBLISHABLE_KEY:"pk_live_76B8059F716253F6"}.REACT_APP_API_URL||"http://localhost:3000/api"}),this.api.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.api.interceptors.response.use((e=>e),(e=>{if(!e.response)throw e.request?new Error("No response from server"):new Error("Error setting up request");switch(e.response.status){case 401:this.handleUnauthorized();break;case 403:throw new Error("Access denied");case 404:throw new Error("Resource not found");case 500:throw new Error("Server error");default:throw new Error(e.response.data.message||"An unexpected error occurred")}}))}handleUnauthorized(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}async createDocument(e){try{return(await this.api.post("/documents/create",e)).data}catch(t){this.handleError(t,"Document creation failed")}}async verifyDocument(e){try{return(await this.api.post("/documents/".concat(e,"/verify"))).data}catch(t){this.handleError(t,"Document verification failed")}}async transferDocument(e,t){try{return(await this.api.post("/documents/".concat(e,"/transfer"),{recipientId:t})).data}catch(r){this.handleError(r,"Document transfer failed")}}async getUserDocuments(){try{return(await this.api.get("/documents")).data.documents||[]}catch(e){this.handleError(e,"Failed to fetch documents")}}async getDocumentById(e){try{return(await this.api.get("/documents/".concat(e))).data}catch(t){this.handleError(t,"Failed to fetch document")}}handleError(e,t){if(e.response){const r=e.response.data.message||t;throw console.error("API Error:",r),new Error(r)}throw e.request?(console.error("Network Error:",e.request),new Error("Network error. Please check your connection.")):(console.error("Request Setup Error:",e.message),new Error(t))}isTransferable(e){return"Transferable"===e.documentType}getStatusColor(e){switch(e){case"Draft":default:return"text-gray-500";case"Active":return"text-green-500";case"Verified":return"text-blue-500";case"Transferred":return"text-purple-500";case"Revoked":return"text-red-500"}}}}}]);
//# sourceMappingURL=357.72d6e042.chunk.js.map