"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[661],{661:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var o=r(43),s=r(837),a=r(749),n=r(579);const c=()=>{const[e,t]=(0,o.useState)([]),[r,c]=(0,o.useState)(!0),[i,d]=(0,o.useState)(null),u=(0,s.Zp)();(0,o.useEffect)((()=>{(async()=>{try{const e=await a.A.getDocuments();t(e),c(!1)}catch(e){d("Failed to fetch documents"),c(!1)}})()}),[]);return r?(0,n.jsx)("div",{children:"Loading documents..."}):i?(0,n.jsx)("div",{children:i}):(0,n.jsxs)("div",{className:"container mx-auto p-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Documents"}),(0,n.jsx)("button",{onClick:()=>{u("/documents/create")},className:"bg-blue-500 text-white px-4 py-2 rounded mb-4",children:"Create New Document"}),0===e.length?(0,n.jsx)("p",{children:"No documents found"}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((e=>(0,n.jsxs)("div",{className:"border rounded p-4 shadow-md",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:e.title||"Untitled Document"}),(0,n.jsx)("p",{children:e.documentType})]},e.id)))})]})}},749:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(722);const s=new class{constructor(){this.api=o.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:3000/api",REACT_APP_BLOCKCHAIN_NETWORK:"xdc_testnet",REACT_APP_BLOCKCHAIN_PROVIDER:"https://rpc.apothem.network",REACT_APP_DOCUMENT_MANAGEMENT_CONTRACT_ADDRESS:"0x74612C664b12416adAcE50Be0E1b1ad6994ce23D",REACT_APP_DOCUMENT_REGISTRY_CONTRACT_ADDRESS:"0xEFc265999C254438e3D595c004e9Fbec3d6cD39a",REACT_APP_MAGIC_PUBLISHABLE_KEY:"pk_live_76B8059F716253F6"}.REACT_APP_API_URL||"http://localhost:3000/api"}),this.api.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.api.interceptors.response.use((e=>e),(e=>{if(!e.response)throw e.request?new Error("No response from server"):new Error("Error setting up request");switch(e.response.status){case 401:this.handleUnauthorized();break;case 403:throw new Error("Access denied");case 404:throw new Error("Resource not found");case 500:throw new Error("Server error");default:throw new Error(e.response.data.message||"An unexpected error occurred")}}))}handleUnauthorized(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}async createDocument(e){try{return(await this.api.post("/documents/create",e)).data}catch(t){this.handleError(t,"Document creation failed")}}async verifyDocument(e){try{return(await this.api.post("/documents/".concat(e,"/verify"))).data}catch(t){this.handleError(t,"Document verification failed")}}async transferDocument(e,t){try{return(await this.api.post("/documents/".concat(e,"/transfer"),{recipientId:t})).data}catch(r){this.handleError(r,"Document transfer failed")}}async getUserDocuments(){try{return(await this.api.get("/documents")).data.documents||[]}catch(e){this.handleError(e,"Failed to fetch documents")}}async getDocumentById(e){try{return(await this.api.get("/documents/".concat(e))).data}catch(t){this.handleError(t,"Failed to fetch document")}}handleError(e,t){if(e.response){const r=e.response.data.message||t;throw console.error("API Error:",r),new Error(r)}throw e.request?(console.error("Network Error:",e.request),new Error("Network error. Please check your connection.")):(console.error("Request Setup Error:",e.message),new Error(t))}isTransferable(e){return"Transferable"===e.documentType}getStatusColor(e){switch(e){case"Draft":default:return"text-gray-500";case"Active":return"text-green-500";case"Verified":return"text-blue-500";case"Transferred":return"text-purple-500";case"Revoked":return"text-red-500"}}}}}]);
//# sourceMappingURL=661.d7e1f5a0.chunk.js.map