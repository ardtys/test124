"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[201],{201:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var s=r(43),a=r(837),c=r(749),n=r(579);const o=()=>{const{id:e}=(0,a.g)(),t=(0,a.Zp)(),[r,o]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),[l,u]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{const t=await c.A.getDocumentById(e);o(t),d(!1)}catch(t){u("Failed to fetch document details"),d(!1)}})()}),[e]);return i?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{children:"Loading..."})}):l?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-red-500",children:l})}):(0,n.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,n.jsxs)("div",{className:"max-w-2xl mx-auto bg-white shadow-md rounded-lg p-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Document Details"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold",children:"Title"}),(0,n.jsx)("p",{children:r.metadata.title})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold",children:"Description"}),(0,n.jsx)("p",{children:r.metadata.description})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold",children:"Document Number"}),(0,n.jsx)("p",{children:r.metadata.documentNumber})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold",children:"Type"}),(0,n.jsx)("p",{children:r.documentType})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold",children:"Status"}),(0,n.jsx)("p",{children:r.status})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-gray-700 font-bold",children:"Created At"}),(0,n.jsx)("p",{children:new Date(r.createdAt).toLocaleString()})]})]}),(0,n.jsxs)("div",{className:"mt-6 flex space-x-4",children:["Transferable"===r.documentType&&(0,n.jsx)("button",{onClick:()=>{t("/documents/".concat(e,"/transfer"))},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Transfer Document"}),"Verified"!==r.status&&(0,n.jsx)("button",{onClick:async()=>{try{await c.A.verifyDocument(e);const t=await c.A.getDocumentById(e);o(t)}catch(t){u("Verification failed")}},className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"Verify Document"})]})]})})}},749:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(722);const a=new class{constructor(){this.api=s.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_URL:"http://localhost:3000/api",REACT_APP_BLOCKCHAIN_NETWORK:"xdc_testnet",REACT_APP_BLOCKCHAIN_PROVIDER:"https://rpc.apothem.network",REACT_APP_DOCUMENT_MANAGEMENT_CONTRACT_ADDRESS:"0x74612C664b12416adAcE50Be0E1b1ad6994ce23D",REACT_APP_DOCUMENT_REGISTRY_CONTRACT_ADDRESS:"0xEFc265999C254438e3D595c004e9Fbec3d6cD39a",REACT_APP_MAGIC_PUBLISHABLE_KEY:"pk_live_76B8059F716253F6"}.REACT_APP_API_URL||"http://localhost:3000/api"}),this.api.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),this.api.interceptors.response.use((e=>e),(e=>{if(!e.response)throw e.request?new Error("No response from server"):new Error("Error setting up request");switch(e.response.status){case 401:this.handleUnauthorized();break;case 403:throw new Error("Access denied");case 404:throw new Error("Resource not found");case 500:throw new Error("Server error");default:throw new Error(e.response.data.message||"An unexpected error occurred")}}))}handleUnauthorized(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"}async createDocument(e){try{return(await this.api.post("/documents/create",e)).data}catch(t){this.handleError(t,"Document creation failed")}}async verifyDocument(e){try{return(await this.api.post("/documents/".concat(e,"/verify"))).data}catch(t){this.handleError(t,"Document verification failed")}}async transferDocument(e,t){try{return(await this.api.post("/documents/".concat(e,"/transfer"),{recipientId:t})).data}catch(r){this.handleError(r,"Document transfer failed")}}async getUserDocuments(){try{return(await this.api.get("/documents")).data.documents||[]}catch(e){this.handleError(e,"Failed to fetch documents")}}async getDocumentById(e){try{return(await this.api.get("/documents/".concat(e))).data}catch(t){this.handleError(t,"Failed to fetch document")}}handleError(e,t){if(e.response){const r=e.response.data.message||t;throw console.error("API Error:",r),new Error(r)}throw e.request?(console.error("Network Error:",e.request),new Error("Network error. Please check your connection.")):(console.error("Request Setup Error:",e.message),new Error(t))}isTransferable(e){return"Transferable"===e.documentType}getStatusColor(e){switch(e){case"Draft":default:return"text-gray-500";case"Active":return"text-green-500";case"Verified":return"text-blue-500";case"Transferred":return"text-purple-500";case"Revoked":return"text-red-500"}}}}}]);
//# sourceMappingURL=201.8f0fb1c4.chunk.js.map